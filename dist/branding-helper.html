<!doctype html>
<html lang="en">
    <head>
        <style>
            body {
                font-family:
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    'Segoe UI',
                    Roboto,
                    Oxygen,
                    Ubuntu,
                    Cantarell,
                    'Open Sans',
                    'Helvetica Neue',
                    sans-serif;
            }
            label {
                display: grid;
                grid-template-columns: 12em 1fr;
            }
            fieldset {
                display: grid;
                gap: 1ex;
            }
            legend {
                font-weight: bolder;
            }
            label strong {
                font-weight: 500;
            }
            label input[type="checkbox"] {
                justify-self: start;
            }

            .grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                justify-items: start;
                border: none;
                padding: 1ex 0;
            }
            #download_link {
                background: #efefef;
                background: buttonface;
                color: buttontext;
                text-decoration: none;
                cursor: pointer;
                box-sizing: border-box;
                padding: 4px 6px;
                border: 1px outset buttonborder;
                border-radius: 2px;
            }
            #download_link:not([href]) {
                display: none;
            }
            #config_form.is-rtmp #sip_settings {
                display: none;
            }
            #config_form:not(.is-rtmp) #rtmp_settings {
                display: none;
            }
        </style>
      <script type="module" crossorigin>(function(){const Z=document.createElement("link").relList;if(Z&&Z.supports&&Z.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const b of d)if(b.type==="childList")for(const W of b.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&n(W)}).observe(document,{childList:!0,subtree:!0});function c(d){const b={};return d.integrity&&(b.integrity=d.integrity),d.referrerPolicy&&(b.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?b.credentials="include":d.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function n(d){if(d.ep)return;d.ep=!0;const b=c(d);fetch(d.href,b)}})();var s=Uint8Array,z=Uint16Array,Sl=Int32Array,hl=new s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vl=new s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vl=new s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ql=function(l,Z){for(var c=new z(31),n=0;n<31;++n)c[n]=Z+=1<<l[n-1];for(var d=new Sl(c[30]),n=1;n<30;++n)for(var b=c[n];b<c[n+1];++b)d[b]=b-c[n]<<5|n;return{b:c,r:d}},Tl=Ql(hl,2),Ul=Tl.b,Il=Tl.r;Ul[28]=258,Il[258]=28;var zl=Ql(Vl,0),ql=zl.b,Cl=zl.r,Jl=new z(32768);for(var t=0;t<32768;++t){var $=(t&43690)>>1|(t&21845)<<1;$=($&52428)>>2|($&13107)<<2,$=($&61680)>>4|($&3855)<<4,Jl[t]=(($&65280)>>8|($&255)<<8)>>1}var E=function(l,Z,c){for(var n=l.length,d=0,b=new z(Z);d<n;++d)l[d]&&++b[l[d]-1];var W=new z(Z);for(d=1;d<Z;++d)W[d]=W[d-1]+b[d-1]<<1;var a;if(c){a=new z(1<<Z);var X=15-Z;for(d=0;d<n;++d)if(l[d])for(var Y=d<<4|l[d],i=Z-l[d],m=W[l[d]-1]++<<i,u=m|(1<<i)-1;m<=u;++m)a[Jl[m]>>X]=Y}else for(a=new z(n),d=0;d<n;++d)l[d]&&(a[d]=Jl[W[l[d]-1]++]>>15-l[d]);return a},ll=new s(288);for(var t=0;t<144;++t)ll[t]=8;for(var t=144;t<256;++t)ll[t]=9;for(var t=256;t<280;++t)ll[t]=7;for(var t=280;t<288;++t)ll[t]=8;var al=new s(32);for(var t=0;t<32;++t)al[t]=5;var $l=E(ll,9,0),lZ=E(ll,9,1),ZZ=E(al,5,0),cZ=E(al,5,1),tl=function(l){for(var Z=l[0],c=1;c<l.length;++c)l[c]>Z&&(Z=l[c]);return Z},P=function(l,Z,c){var n=Z/8|0;return(l[n]|l[n+1]<<8)>>(Z&7)&c},ol=function(l,Z){var c=Z/8|0;return(l[c]|l[c+1]<<8|l[c+2]<<16)>>(Z&7)},Ll=function(l){return(l+7)/8|0},ul=function(l,Z,c){return(Z==null||Z<0)&&(Z=0),(c==null||c>l.length)&&(c=l.length),new s(l.subarray(Z,c))},nZ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],f=function(l,Z,c){var n=new Error(Z||nZ[l]);if(n.code=l,Error.captureStackTrace&&Error.captureStackTrace(n,f),!c)throw n;return n},dZ=function(l,Z,c,n){var d=l.length,b=n?n.length:0;if(!d||Z.f&&!Z.l)return c||new s(0);var W=!c,a=W||Z.i!=2,X=Z.i;W&&(c=new s(d*3));var Y=function(ml){var Wl=c.length;if(ml>Wl){var dl=new s(Math.max(Wl*2,ml));dl.set(c),c=dl}},i=Z.f||0,m=Z.p||0,u=Z.b||0,p=Z.l,V=Z.d,h=Z.m,r=Z.n,k=d*8;do{if(!p){i=P(l,m,1);var C=P(l,m+1,3);if(m+=3,C)if(C==1)p=lZ,V=cZ,h=9,r=5;else if(C==2){var F=P(l,m,31)+257,J=P(l,m+10,15)+4,e=F+P(l,m+5,31)+1;m+=14;for(var G=new s(e),S=new s(19),N=0;N<J;++N)S[vl[N]]=P(l,m+N*3,7);m+=J*3;for(var H=tl(S),q=(1<<H)-1,Q=E(S,H,1),N=0;N<e;){var x=Q[P(l,m,q)];m+=x&15;var v=x>>4;if(v<16)G[N++]=v;else{var L=0,o=0;for(v==16?(o=3+P(l,m,3),m+=2,L=G[N-1]):v==17?(o=3+P(l,m,7),m+=3):v==18&&(o=11+P(l,m,127),m+=7);o--;)G[N++]=L}}var j=G.subarray(0,F),g=G.subarray(F);h=tl(j),r=tl(g),p=E(j,h,1),V=E(g,r,1)}else f(1);else{var v=Ll(m)+4,I=l[v-4]|l[v-3]<<8,R=v+I;if(R>d){X&&f(0);break}a&&Y(u+I),c.set(l.subarray(v,R),u),Z.b=u+=I,Z.p=m=R*8,Z.f=i;continue}if(m>k){X&&f(0);break}}a&&Y(u+131072);for(var bl=(1<<h)-1,B=(1<<r)-1,D=m;;D=m){var L=p[ol(l,m)&bl],T=L>>4;if(m+=L&15,m>k){X&&f(0);break}if(L||f(2),T<256)c[u++]=T;else if(T==256){D=m,p=null;break}else{var U=T-254;if(T>264){var N=T-257,y=hl[N];U=P(l,m,(1<<y)-1)+Ul[N],m+=y}var O=V[ol(l,m)&B],cl=O>>4;O||f(3),m+=O&15;var g=ql[cl];if(cl>3){var y=Vl[cl];g+=ol(l,m)&(1<<y)-1,m+=y}if(m>k){X&&f(0);break}a&&Y(u+131072);var nl=u+U;if(u<g){var Gl=b-g,pl=Math.min(g,nl);for(Gl+u<0&&f(3);u<pl;++u)c[u]=n[Gl+u]}for(;u<nl;++u)c[u]=c[u-g]}}Z.l=p,Z.p=D,Z.b=u,Z.f=i,p&&(i=1,Z.m=h,Z.d=V,Z.n=r)}while(!i);return u!=c.length&&W?ul(c,0,u):c.subarray(0,u)},A=function(l,Z,c){c<<=Z&7;var n=Z/8|0;l[n]|=c,l[n+1]|=c>>8},il=function(l,Z,c){c<<=Z&7;var n=Z/8|0;l[n]|=c,l[n+1]|=c>>8,l[n+2]|=c>>16},yl=function(l,Z){for(var c=[],n=0;n<l.length;++n)l[n]&&c.push({s:n,f:l[n]});var d=c.length,b=c.slice();if(!d)return{t:Pl,l:0};if(d==1){var W=new s(c[0].s+1);return W[c[0].s]=1,{t:W,l:1}}c.sort(function(R,F){return R.f-F.f}),c.push({s:-1,f:25001});var a=c[0],X=c[1],Y=0,i=1,m=2;for(c[0]={s:-1,f:a.f+X.f,l:a,r:X};i!=d-1;)a=c[c[Y].f<c[m].f?Y++:m++],X=c[Y!=i&&c[Y].f<c[m].f?Y++:m++],c[i++]={s:-1,f:a.f+X.f,l:a,r:X};for(var u=b[0].s,n=1;n<d;++n)b[n].s>u&&(u=b[n].s);var p=new z(u+1),V=Nl(c[i-1],p,0);if(V>Z){var n=0,h=0,r=V-Z,k=1<<r;for(b.sort(function(F,J){return p[J.s]-p[F.s]||F.f-J.f});n<d;++n){var C=b[n].s;if(p[C]>Z)h+=k-(1<<V-p[C]),p[C]=Z;else break}for(h>>=r;h>0;){var v=b[n].s;p[v]<Z?h-=1<<Z-p[v]++-1:++n}for(;n>=0&&h;--n){var I=b[n].s;p[I]==Z&&(--p[I],++h)}V=Z}return{t:new s(p),l:V}},Nl=function(l,Z,c){return l.s==-1?Math.max(Nl(l.l,Z,c+1),Nl(l.r,Z,c+1)):Z[l.s]=c},Hl=function(l){for(var Z=l.length;Z&&!l[--Z];);for(var c=new z(++Z),n=0,d=l[0],b=1,W=function(X){c[n++]=X},a=1;a<=Z;++a)if(l[a]==d&&a!=Z)++b;else{if(!d&&b>2){for(;b>138;b-=138)W(32754);b>2&&(W(b>10?b-11<<5|28690:b-3<<5|12305),b=0)}else if(b>3){for(W(d),--b;b>6;b-=6)W(8304);b>2&&(W(b-3<<5|8208),b=0)}for(;b--;)W(d);b=1,d=l[a]}return{c:c.subarray(0,n),n:Z}},Xl=function(l,Z){for(var c=0,n=0;n<Z.length;++n)c+=l[n]*Z[n];return c},Bl=function(l,Z,c){var n=c.length,d=Ll(Z+2);l[d]=n&255,l[d+1]=n>>8,l[d+2]=l[d]^255,l[d+3]=l[d+1]^255;for(var b=0;b<n;++b)l[d+b+4]=c[b];return(d+4+n)*8},fl=function(l,Z,c,n,d,b,W,a,X,Y,i){A(Z,i++,c),++d[256];for(var m=yl(d,15),u=m.t,p=m.l,V=yl(b,15),h=V.t,r=V.l,k=Hl(u),C=k.c,v=k.n,I=Hl(h),R=I.c,F=I.n,J=new z(19),e=0;e<C.length;++e)++J[C[e]&31];for(var e=0;e<R.length;++e)++J[R[e]&31];for(var G=yl(J,7),S=G.t,N=G.l,H=19;H>4&&!S[vl[H-1]];--H);var q=Y+5<<3,Q=Xl(d,ll)+Xl(b,al)+W,x=Xl(d,u)+Xl(b,h)+W+14+3*H+Xl(J,S)+2*J[16]+3*J[17]+7*J[18];if(X>=0&&q<=Q&&q<=x)return Bl(Z,i,l.subarray(X,X+Y));var L,o,j,g;if(A(Z,i,1+(x<Q)),i+=2,x<Q){L=E(u,p,0),o=u,j=E(h,r,0),g=h;var bl=E(S,N,0);A(Z,i,v-257),A(Z,i+5,F-1),A(Z,i+10,H-4),i+=14;for(var e=0;e<H;++e)A(Z,i+3*e,S[vl[e]]);i+=3*H;for(var B=[C,R],D=0;D<2;++D)for(var T=B[D],e=0;e<T.length;++e){var U=T[e]&31;A(Z,i,bl[U]),i+=S[U],U>15&&(A(Z,i,T[e]>>5&127),i+=T[e]>>12)}}else L=$l,o=ll,j=ZZ,g=al;for(var e=0;e<a;++e){var y=n[e];if(y>255){var U=y>>18&31;il(Z,i,L[U+257]),i+=o[U+257],U>7&&(A(Z,i,y>>23&31),i+=hl[U]);var O=y&31;il(Z,i,j[O]),i+=g[O],O>3&&(il(Z,i,y>>5&8191),i+=Vl[O])}else il(Z,i,L[y]),i+=o[y]}return il(Z,i,L[256]),i+o[256]},bZ=new Sl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pl=new s(0),mZ=function(l,Z,c,n,d,b){var W=b.z||l.length,a=new s(n+W+5*(1+Math.ceil(W/7e3))+d),X=a.subarray(n,a.length-d),Y=b.l,i=(b.r||0)&7;if(Z){i&&(X[0]=b.r>>3);for(var m=bZ[Z-1],u=m>>13,p=m&8191,V=(1<<c)-1,h=b.p||new z(32768),r=b.h||new z(V+1),k=Math.ceil(c/3),C=2*k,v=function(rl){return(l[rl]^l[rl+1]<<k^l[rl+2]<<C)&V},I=new Sl(25e3),R=new z(288),F=new z(32),J=0,e=0,G=b.i||0,S=0,N=b.w||0,H=0;G+2<W;++G){var q=v(G),Q=G&32767,x=r[q];if(h[Q]=x,r[q]=Q,N<=G){var L=W-G;if((J>7e3||S>24576)&&(L>423||!Y)){i=fl(l,X,0,I,R,F,e,S,H,G-H,i),S=J=e=0,H=G;for(var o=0;o<286;++o)R[o]=0;for(var o=0;o<30;++o)F[o]=0}var j=2,g=0,bl=p,B=Q-x&32767;if(L>2&&q==v(G-B))for(var D=Math.min(u,L)-1,T=Math.min(32767,G),U=Math.min(258,L);B<=T&&--bl&&Q!=x;){if(l[G+j]==l[G+j-B]){for(var y=0;y<U&&l[G+y]==l[G+y-B];++y);if(y>j){if(j=y,g=B,y>D)break;for(var O=Math.min(B,y-2),cl=0,o=0;o<O;++o){var nl=G-B+o&32767,Gl=h[nl],pl=nl-Gl&32767;pl>cl&&(cl=pl,x=nl)}}}Q=x,x=h[Q],B+=Q-x&32767}if(g){I[S++]=268435456|Il[j]<<18|Cl[g];var ml=Il[j]&31,Wl=Cl[g]&31;e+=hl[ml]+Vl[Wl],++R[257+ml],++F[Wl],N=G+j,++J}else I[S++]=l[G],++R[l[G]]}}for(G=Math.max(G,N);G<W;++G)I[S++]=l[G],++R[l[G]];i=fl(l,X,Y,I,R,F,e,S,H,G-H,i),Y||(b.r=i&7|X[i/8|0]<<3,i-=7,b.h=r,b.p=h,b.i=G,b.w=N)}else{for(var G=b.w||0;G<W+Y;G+=65535){var dl=G+65535;dl>=W&&(X[i/8|0]=Y,dl=W),i=Bl(X,i+1,l.subarray(G,dl))}b.i=W}return ul(a,0,n+Ll(i)+d)},WZ=function(){for(var l=new Int32Array(256),Z=0;Z<256;++Z){for(var c=Z,n=9;--n;)c=(c&1&&-306674912)^c>>>1;l[Z]=c}return l}(),iZ=function(){var l=-1;return{p:function(Z){for(var c=l,n=0;n<Z.length;++n)c=WZ[c&255^Z[n]]^c>>>8;l=c},d:function(){return~l}}},XZ=function(l,Z,c,n,d){if(!d&&(d={l:1},Z.dictionary)){var b=Z.dictionary.subarray(-32768),W=new s(b.length+l.length);W.set(b),W.set(l,b.length),l=W,d.w=b.length}return mZ(l,Z.level==null?6:Z.level,Z.mem==null?d.l?Math.ceil(Math.max(8,Math.min(13,Math.log(l.length)))*1.5):20:12+Z.mem,c,n,d)},wl=function(l,Z){var c={};for(var n in l)c[n]=l[n];for(var n in Z)c[n]=Z[n];return c},M=function(l,Z){return l[Z]|l[Z+1]<<8},w=function(l,Z){return(l[Z]|l[Z+1]<<8|l[Z+2]<<16|l[Z+3]<<24)>>>0},sl=function(l,Z){return w(l,Z)+w(l,Z+4)*4294967296},K=function(l,Z,c){for(;c;++Z)l[Z]=c,c>>>=8};function aZ(l,Z){return XZ(l,Z||{},0,0)}function uZ(l,Z){return dZ(l,{i:2},Z&&Z.out,Z&&Z.dictionary)}var Ol=function(l,Z,c,n){for(var d in l){var b=l[d],W=Z+d,a=n;Array.isArray(b)&&(a=wl(n,b[1]),b=b[0]),b instanceof s?c[W]=[b,a]:(c[W+="/"]=[new s(0),a],Ol(b,W,c,n))}},kl=typeof TextEncoder<"u"&&new TextEncoder,Rl=typeof TextDecoder<"u"&&new TextDecoder,YZ=0;try{Rl.decode(Pl,{stream:!0}),YZ=1}catch{}var GZ=function(l){for(var Z="",c=0;;){var n=l[c++],d=(n>127)+(n>223)+(n>239);if(c+d>l.length)return{s:Z,r:ul(l,c-1)};d?d==3?(n=((n&15)<<18|(l[c++]&63)<<12|(l[c++]&63)<<6|l[c++]&63)-65536,Z+=String.fromCharCode(55296|n>>10,56320|n&1023)):d&1?Z+=String.fromCharCode((n&31)<<6|l[c++]&63):Z+=String.fromCharCode((n&15)<<12|(l[c++]&63)<<6|l[c++]&63):Z+=String.fromCharCode(n)}};function el(l,Z){var c;if(kl)return kl.encode(l);for(var n=l.length,d=new s(l.length+(l.length>>1)),b=0,W=function(Y){d[b++]=Y},c=0;c<n;++c){if(b+5>d.length){var a=new s(b+8+(n-c<<1));a.set(d),d=a}var X=l.charCodeAt(c);X<128||Z?W(X):X<2048?(W(192|X>>6),W(128|X&63)):X>55295&&X<57344?(X=65536+(X&1047552)|l.charCodeAt(++c)&1023,W(240|X>>18),W(128|X>>12&63),W(128|X>>6&63),W(128|X&63)):(W(224|X>>12),W(128|X>>6&63),W(128|X&63))}return ul(d,0,b)}function gl(l,Z){if(Z){for(var c="",n=0;n<l.length;n+=16384)c+=String.fromCharCode.apply(null,l.subarray(n,n+16384));return c}else{if(Rl)return Rl.decode(l);var d=GZ(l),b=d.s,c=d.r;return c.length&&f(8),b}}var pZ=function(l,Z){return Z+30+M(l,Z+26)+M(l,Z+28)},eZ=function(l,Z,c){var n=M(l,Z+28),d=gl(l.subarray(Z+46,Z+46+n),!(M(l,Z+8)&2048)),b=Z+46+n,W=w(l,Z+20),a=c&&W==4294967295?hZ(l,b):[W,w(l,Z+24),w(l,Z+42)],X=a[0],Y=a[1],i=a[2];return[M(l,Z+10),X,Y,d,b+M(l,Z+30)+M(l,Z+32),i]},hZ=function(l,Z){for(;M(l,Z)!=1;Z+=4+M(l,Z+2));return[sl(l,Z+12),sl(l,Z+4),sl(l,Z+20)]},Fl=function(l){var Z=0;if(l)for(var c in l){var n=l[c].length;n>65535&&f(9),Z+=n+4}return Z},xl=function(l,Z,c,n,d,b,W,a){var X=n.length,Y=c.extra,i=a&&a.length,m=Fl(Y);K(l,Z,W!=null?33639248:67324752),Z+=4,W!=null&&(l[Z++]=20,l[Z++]=c.os),l[Z]=20,Z+=2,l[Z++]=c.flag<<1|(b<0&&8),l[Z++]=d&&8,l[Z++]=c.compression&255,l[Z++]=c.compression>>8;var u=new Date(c.mtime==null?Date.now():c.mtime),p=u.getFullYear()-1980;if((p<0||p>119)&&f(10),K(l,Z,p<<25|u.getMonth()+1<<21|u.getDate()<<16|u.getHours()<<11|u.getMinutes()<<5|u.getSeconds()>>1),Z+=4,b!=-1&&(K(l,Z,c.crc),K(l,Z+4,b<0?-b-2:b),K(l,Z+8,c.size)),K(l,Z+12,X),K(l,Z+14,m),Z+=16,W!=null&&(K(l,Z,i),K(l,Z+6,c.attrs),K(l,Z+10,W),Z+=14),l.set(n,Z),Z+=X,m)for(var V in Y){var h=Y[V],r=h.length;K(l,Z,+V),K(l,Z+2,r),l.set(h,Z+4),Z+=4+r}return i&&(l.set(a,Z),Z+=i),Z},VZ=function(l,Z,c,n,d){K(l,Z,101010256),K(l,Z+8,c),K(l,Z+10,c),K(l,Z+12,n),K(l,Z+16,d)};function rZ(l,Z){Z||(Z={});var c={},n=[];Ol(l,"",c,Z);var d=0,b=0;for(var W in c){var a=c[W],X=a[0],Y=a[1],i=Y.level==0?0:8,m=el(W),u=m.length,p=Y.comment,V=p&&el(p),h=V&&V.length,r=Fl(Y.extra);u>65535&&f(11);var k=i?aZ(X,Y):X,C=k.length,v=iZ();v.p(X),n.push(wl(Y,{size:X.length,crc:v.d(),c:k,f:m,m:V,u:u!=W.length||V&&p.length!=h,o:d,compression:i})),d+=30+u+r+C,b+=76+2*(u+r)+(h||0)+C}for(var I=new s(b+22),R=d,F=b-d,J=0;J<n.length;++J){var m=n[J];xl(I,m.o,m,m.f,m.u,m.c.length);var e=30+m.f.length+Fl(m.extra);I.set(m.c,m.o+e),xl(I,d,m,m.f,m.u,m.c.length,m.o,m.m),d+=16+e+(m.m?m.m.length:0)}return VZ(I,d,n.length,F,R),I}function tZ(l,Z){for(var c={},n=l.length-22;w(l,n)!=101010256;--n)(!n||l.length-n>65558)&&f(13);var d=M(l,n+8);if(!d)return{};var b=w(l,n+16),W=b==4294967295||d==65535;if(W){var a=w(l,n-12);W=w(l,a)==101075792,W&&(d=w(l,a+32),b=w(l,a+48))}for(var X=0;X<d;++X){var Y=eZ(l,b,W),i=Y[0],m=Y[1],u=Y[2],p=Y[3],V=Y[4],h=Y[5],r=pZ(l,h);b=V,i?i==8?c[p]=uZ(l.subarray(r,r+m),{out:new s(u)}):f(14,"unknown compression type "+i):c[p]=ul(l,r,r+m)}return c}const oZ={main:"index.html",assets:{"index.html":"PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQoNCjxzY3JpcHQgdHlwZT0ibW9kdWxlIiBjcm9zc29yaWdpbj4oZnVuY3Rpb24oKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKS5yZWxMaXN0O2lmKHQmJnQuc3VwcG9ydHMmJnQuc3VwcG9ydHMoIm1vZHVsZXByZWxvYWQiKSlyZXR1cm47Zm9yKGNvbnN0IG8gb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGlua1tyZWw9Im1vZHVsZXByZWxvYWQiXScpKWEobyk7bmV3IE11dGF0aW9uT2JzZXJ2ZXIobz0+e2Zvcihjb25zdCBpIG9mIG8paWYoaS50eXBlPT09ImNoaWxkTGlzdCIpZm9yKGNvbnN0IGYgb2YgaS5hZGRlZE5vZGVzKWYudGFnTmFtZT09PSJMSU5LIiYmZi5yZWw9PT0ibW9kdWxlcHJlbG9hZCImJmEoZil9KS5vYnNlcnZlKGRvY3VtZW50LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pO2Z1bmN0aW9uIG4obyl7Y29uc3QgaT17fTtyZXR1cm4gby5pbnRlZ3JpdHkmJihpLmludGVncml0eT1vLmludGVncml0eSksby5yZWZlcnJlclBvbGljeSYmKGkucmVmZXJyZXJQb2xpY3k9by5yZWZlcnJlclBvbGljeSksby5jcm9zc09yaWdpbj09PSJ1c2UtY3JlZGVudGlhbHMiP2kuY3JlZGVudGlhbHM9ImluY2x1ZGUiOm8uY3Jvc3NPcmlnaW49PT0iYW5vbnltb3VzIj9pLmNyZWRlbnRpYWxzPSJvbWl0IjppLmNyZWRlbnRpYWxzPSJzYW1lLW9yaWdpbiIsaX1mdW5jdGlvbiBhKG8pe2lmKG8uZXApcmV0dXJuO28uZXA9ITA7Y29uc3QgaT1uKG8pO2ZldGNoKG8uaHJlZixpKX19KSgpO3ZhciBiZTsoZnVuY3Rpb24oZSl7ZVtlLnRyYWNlPTEwXT0idHJhY2UiLGVbZS5kZWJ1Zz0yMF09ImRlYnVnIixlW2UuaW5mbz0zMF09ImluZm8iLGVbZS53YXJuPTQwXT0id2FybiIsZVtlLmVycm9yPTUwXT0iZXJyb3IiLGVbZS5mYXRhbD02MF09ImZhdGFsIixlW2Uuc2lsZW50PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSXT0ic2lsZW50In0pKGJlfHwoYmU9e30pKTtmdW5jdGlvbiBxZSgpe3JldHVybiBPYmplY3QuZnJlZXplKHtmYXRhbDooZSx0KT0+Y29uc29sZS5lcnJvcih0LGUpLGVycm9yOihlLHQpPT5jb25zb2xlLmVycm9yKHQsZSksd2FybjooZSx0KT0+Y29uc29sZS53YXJuKHQsZSksaW5mbzooZSx0KT0+Y29uc29sZS5pbmZvKHQsZSksZGVidWc6KGUsdCk9PmNvbnNvbGUuZGVidWcodCxlKSx0cmFjZSgpe30sc2lsZW50KCl7fSxyZWRhY3QoKXt9fSl9bGV0IHg9cWUoKTtjb25zdCBYZT17fSxRZT1lPT57bGV0IHQ9bmV3IEFycmF5O3JldHVybnthZGQ6bj0+e2lmKGU9PT0wKXJldHVybltdO3QubGVuZ3RoPGU/dC5zcGxpY2UoZSwwLG4pOnQ9Wy4uLnQuc2xpY2UoMSksbl19LGVudHJpZXM6KCk9PnQuc2xpY2UoMCksZm9yRWFjaDpuPT57dC5mb3JFYWNoKG4pfX19LFllPSJBbm9ueW1vdXMiLFplPSJBbm9ueW1vdXNTaWduYWwiO2Z1bmN0aW9uIFUoZSl7cmV0dXJuIGUubmFtZXx8WWV9ZnVuY3Rpb24gdihlPXt9KXtjb25zdHthbGxvd0VtaXR0aW5nV2l0aG91dE9ic2VydmVyOnQ9ITEsdmFyaWFudDpuPSJnZW5lcmljIixidWZmZXJTaXplOmE9MixuYW1lOm89WmV9PWUsaT1uZXcgU2V0LGY9bmV3IFdlYWtNYXAsaD1uZXcgV2Vha1NldCxnPW4hPT0iZ2VuZXJpYyI/UWUobj09PSJiZWhhdmlvciI/MTphKTp2b2lkIDA7ZnVuY3Rpb24gbChjLHMpe3RyeXtjb25zdCB5PWYuZ2V0KGMpO3gudHJhY2Uoe3NpZ25hbDpvLHN1YmplY3Q6cyxvYnNlcnZlcjpjLGNvbnRleHQ6eX0sYEVtaXR0aW5nIGEgc3ViamVjdCB0byBvYnNlcnZlciAke1UoYyl9YCksYy5jYWxsKHkscyksaC5oYXMoYykmJmIoYyl9Y2F0Y2goeSl7dGhyb3cgeC5lcnJvcih7c2lnbmFsOm8sZXJyb3I6eSxvYnNlcnZlcjpjLHN1YmplY3Q6c30sYGVtaXQgd2l0aCBlcnJvciBmb3Igb2JzZXJ2ZXIgJHtVKGMpfWApLHkgaW5zdGFuY2VvZiBSYW5nZUVycm9yP25ldyBSYW5nZUVycm9yKGBSYW5nZUVycm9yOiBQb3NzaWJsZSByZWN1cnNpdmUgY2FsbCB3aGVuIGNhbGxpbmcgJHtVKGMpfSBmb3IgJHtvfWApOnl9fWNvbnN0IHU9KGMscyk9PntpZihpLmhhcyhjKSl7Y29uc3QgeT1gT2JzZXJ2ZXIgJHtVKGMpfSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIWA7dGhyb3cgeC5lcnJvcih7c2lnbmFsOm8sb2JzZXJ2ZXI6Y30seSksbmV3IEVycm9yKGBEdXBsaWNhdGVkT2JzZXJ2ZXI6ICR7eX1gKX1yZXR1cm4geC50cmFjZSh7c2lnbmFsOm8sb2JzZXJ2ZXI6Y30sYEFkZGluZyAke1UoYyl9IHRvICR7b31gKSxpLmFkZChjKSxzJiZmLnNldChjLHMpLGc/LmZvckVhY2goeT0+e2woYyx5KX0pLCgpPT5iKGMpfSxwPShjLHMpPT57aWYoaC5oYXMoYykpe2NvbnN0IHk9YCR7VShjKX0gaGFzIGFscmVhZHkgYmVlbiBhZGRlZCBvbmNlIHRvICR7b30hYDt0aHJvdyB4LmVycm9yKHtzaWduYWw6byxvYnNlcnZlcjpjfSx5KSxuZXcgRXJyb3IoYE5vT25jZUFnYWluOiAke3l9YCl9cmV0dXJuIGguYWRkKGMpLHUoYyxzKX0sYj1jPT57aWYoIWkuZGVsZXRlKGMpKXRocm93IHguZXJyb3Ioe3NpZ25hbDpvLG9ic2VydmVyOmN9LGBVbmFibGUgdG8gcmVtb3ZlIG9ic2VydmVyICR7VShjKX1gKSxuZXcgRXJyb3IoYFVuYWJsZVRvUmVtb3ZlOiAke1UoYyl9YCk7aC5kZWxldGUoYyksZi5kZWxldGUoYykseC50cmFjZSh7c2lnbmFsOm8sb2JzZXJ2ZXI6Y30sYFJlbW92ZWQgJHtVKGMpfSBmcm9tICR7b31gKX0sUD0oKT0+aS5zaXplO2Z1bmN0aW9uIG0oYyl7aWYoZylnLmFkZChjKTtlbHNlIGlmKCFpLnNpemUmJiF0KXtjb25zdHtzdGFjazpzfT1YZS5kZWJ1Zz9uZXcgRXJyb3I6e3N0YWNrOnZvaWQgMH07eC53YXJuKHtzaWduYWw6byxzdWJqZWN0OmMsc3RhY2s6c30sYEVtaXR0aW5nICR7b30gd2l0aG91dCBhbnkgb2JzZXJ2ZXIhIFRoaXMgbWF5IGJlIGEgbWlzdGFrZS5gKX1pLmZvckVhY2gocz0+e2wocyxjKX0pfXJldHVybntuYW1lOm8sZ2V0IHNpemUoKXtyZXR1cm4gUCgpfSxhZGQ6dSxhZGRPbmNlOnAscmVtb3ZlOmIsZW1pdDptfX12YXIgUmU7KGZ1bmN0aW9uKGUpe2VbZS50cmFjZT0xMF09InRyYWNlIixlW2UuZGVidWc9MjBdPSJkZWJ1ZyIsZVtlLmluZm89MzBdPSJpbmZvIixlW2Uud2Fybj00MF09Indhcm4iLGVbZS5lcnJvcj01MF09ImVycm9yIixlW2UuZmF0YWw9NjBdPSJmYXRhbCIsZVtlLnNpbGVudD1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUl09InNpbGVudCJ9KShSZXx8KFJlPXt9KSk7ZnVuY3Rpb24gS2UoKXtyZXR1cm4gT2JqZWN0LmZyZWV6ZSh7ZmF0YWw6KGUsdCk9PmNvbnNvbGUuZXJyb3IodCxlKSxlcnJvcjooZSx0KT0+Y29uc29sZS5lcnJvcih0LGUpLHdhcm46KGUsdCk9PmNvbnNvbGUud2Fybih0LGUpLGluZm86KGUsdCk9PmNvbnNvbGUuaW5mbyh0LGUpLGRlYnVnOihlLHQpPT5jb25zb2xlLmRlYnVnKHQsZSksdHJhY2UoKXt9LHNpbGVudCgpe30scmVkYWN0KCl7fX0pfWxldCBqPUtlKCk7ZnVuY3Rpb24gZXQoZSl7cmV0dXJuISEoZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYiY2hhbklkImluIGUmJiJldmVudCJpbiBlKX1mdW5jdGlvbiB0dChlKXtyZXR1cm4hIShlJiZ0eXBlb2YgZT09Im9iamVjdCImJiJjaGFuSWQiaW4gZSYmInJlcGx5VG8iaW4gZSl9bGV0IHE7Y29uc3QgbnQ9bmV3IFVpbnQ4QXJyYXkoMTYpO2Z1bmN0aW9uIHJ0KCl7aWYoIXEmJihxPXR5cGVvZiBjcnlwdG88InUiJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSwhcSkpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiBxKG50KX1jb25zdCBDPVtdO2ZvcihsZXQgZT0wO2U8MjU2OysrZSlDLnB1c2goKGUrMjU2KS50b1N0cmluZygxNikuc2xpY2UoMSkpO2Z1bmN0aW9uIG90KGUsdD0wKXtyZXR1cm4gQ1tlW3QrMF1dK0NbZVt0KzFdXStDW2VbdCsyXV0rQ1tlW3QrM11dKyItIitDW2VbdCs0XV0rQ1tlW3QrNV1dKyItIitDW2VbdCs2XV0rQ1tlW3QrN11dKyItIitDW2VbdCs4XV0rQ1tlW3QrOV1dKyItIitDW2VbdCsxMF1dK0NbZVt0KzExXV0rQ1tlW3QrMTJdXStDW2VbdCsxM11dK0NbZVt0KzE0XV0rQ1tlW3QrMTVdXX1jb25zdCBhdD10eXBlb2YgY3J5cHRvPCJ1IiYmY3J5cHRvLnJhbmRvbVVVSUQmJmNyeXB0by5yYW5kb21VVUlELmJpbmQoY3J5cHRvKSxQZT17cmFuZG9tVVVJRDphdH07ZnVuY3Rpb24gaXQoZSx0LG4pe2lmKFBlLnJhbmRvbVVVSUQmJiFlKXJldHVybiBQZS5yYW5kb21VVUlEKCk7ZT1lfHx7fTtjb25zdCBhPWUucmFuZG9tfHwoZS5ybmd8fHJ0KSgpO3JldHVybiBhWzZdPWFbNl0mMTV8NjQsYVs4XT1hWzhdJjYzfDEyOCxvdChhKX1jb25zdCBzdD0iNDAwcHgiLGN0PSIyMDBweCI7ZnVuY3Rpb24gQWUoZSl7cmV0dXJuYCR7ZT9gJHtlfS1gOiIifSR7aXQoKX1gfWZ1bmN0aW9uIHV0KCl7Y29uc3QgZT1uZXcgTWFwLHQ9bmV3IFNldDtyZXR1cm4gd2luZG93Lm9uYmVmb3JldW5sb2FkPSgpPT57dC5mb3JFYWNoKGY9PmNsZWFySW50ZXJ2YWwoZikpLHQuY2xlYXIoKX0se2FkZDooZixoKT0+e2lmKGUuaGFzKGYpKXtqLndhcm4oYEEgcG9wdXAgd2l0aCB3aXRoIElEOicke2Z9JyBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWRgKTtyZXR1cm59ZS5zZXQoZix7cG9wdXA6bnVsbCxzaG91bGRPcGVuOmh9KX0scmVtb3ZlOmY9PntlLmRlbGV0ZShmKX0sb3BlbjooZixoLGcpPT57ZS5oYXMoZil8fGUuc2V0KGYse3BvcHVwOm51bGx9KTtjb25zdCBsPWUuZ2V0KGYpO2lmKGw/LnBvcHVwJiYhbC5wb3B1cC5jbG9zZWQpe2oud2FybihgUG9wdXAgd2l0aCBJRDonJHtmfScgaXMgY3VycmVudGx5IG9wZW5lZGApO3JldHVybn1pZihlLmdldChmKT8uc2hvdWxkT3BlbiYmIWUuZ2V0KGYpPy5zaG91bGRPcGVuPy4oZz8/e30pKXJldHVybjtjb25zdCB1PXdpbmRvdy5vcGVuKC4uLmgpO2lmKGwmJihsLnBvcHVwPXUpLHUpe2NvbnN0IHA9d2luZG93LnNldEludGVydmFsKCgpPT57aWYodS5jbG9zZWQpe2NvbnN0IGI9ZS5nZXQoZik7YiYmKGIucG9wdXA9bnVsbCksY2xlYXJJbnRlcnZhbChwKSx0LmRlbGV0ZShwKX19LDUwMCk7dC5hZGQocCl9fSxnZXQ6Zj0+ZS5nZXQoZik/LnBvcHVwfX1mdW5jdGlvbiBsdCgpe2NvbnN0IGU9bmV3IE1hcDtyZXR1cm57YWRkOih7aWQ6byx1cmw6aSx0eXBlOmYsLi4uaH0pPT57aWYoZS5oYXMobykpe2oud2FybihgQW4gaWZyYW1lIHdpdGggd2l0aCBJRDonJHtvfScgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkYCk7cmV0dXJufWNvbnN0e2hlYWRlclRpdGxlOmcsaW5pdFBvc2l0aW9uOmx9PXsuLi5ofSx1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3Uuc3JjPWk7Y29uc3QgcD1sPz97d2lkdGg6c3QsaGVpZ2h0OmN0fTtyZXR1cm4gZS5zZXQobyx7ZWxlbWVudDp1LHR5cGU6ZixoZWFkZXJUaXRsZTpnLGluaXRQb3NpdGlvbjpwfSksdX0scmVtb3ZlOm89PntlLmRlbGV0ZShvKX0sb3BlbixnZXQ6bz0+ZS5nZXQobyl9fWNsYXNzIGR0e2NvbnN0cnVjdG9yKHQsbil7dGhpcy50YXJnZXQ9dCx0aGlzLmNoYW5JZD1uLHRoaXMucGVuZGluZ0NhbGxzPW5ldyBNYXAsdGhpcy5ldmVudExpc3RlbmVycz1uZXcgU2V0LHRoaXMub25NZXNzYWdlPWE9PntpZihhLmRhdGEuY2hhbklkIT09dGhpcy5jaGFuSWQpcmV0dXJuO2NvbnN0IG89YS5kYXRhO2lmKGouZGVidWcoe2V2dDphfSxgTWVzc2FnZSByZWNlaXZlZCBmb3IgY2hhbm5lbCAke3RoaXMuY2hhbklkfWApLHR0KG8pKXtjb25zdFtpLGZdPXRoaXMucGVuZGluZ0NhbGxzLmdldChvLnJlcGx5VG8pPz9bXTtpZighaSl7ai5kZWJ1Zyh7ZXZ0OmF9LCJSZXNvbHZlIGZuIGRvZXNudCBleGlzdCIpO3JldHVybn10aGlzLnBlbmRpbmdDYWxscy5kZWxldGUoby5yZXBseVRvKSxpKG8ucGF5bG9hZCl9ZXQobykmJnRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaChpPT57aShvKX0pfSxnbG9iYWxUaGlzLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHRoaXMub25NZXNzYWdlKX1hZGRFdmVudExpc3RlbmVyKHQpe3RoaXMuZXZlbnRMaXN0ZW5lcnMuYWRkKHQpfXJlbW92ZUV2ZW50TGlzdGVuZXIodCl7dGhpcy5ldmVudExpc3RlbmVycy5kZWxldGUodCl9ZW1pdEV2ZW50KHQpe3RoaXMudGFyZ2V0LnBvc3RNZXNzYWdlKHtjaGFuSWQ6dGhpcy5jaGFuSWQsLi4udH0sIioiKX1jYWxsUlBDKHQsbixhKXtjb25zdCBvPUFlKCk7cmV0dXJuIGouZGVidWcoe3BheWxvYWQ6bixpZDpvfSxgJyR7dH0nIGNhbGxlZCBmb3IgY2hhbm5lbCAke3RoaXMuY2hhbklkfWApLG5ldyBQcm9taXNlKChpLGYpPT57dGhpcy5wZW5kaW5nQ2FsbHMuc2V0KG8sW2ksZl0pLHRoaXMudGFyZ2V0LnBvc3RNZXNzYWdlKHtycGM6dCxwYXlsb2FkOm4saWQ6byxjaGFuSWQ6dGhpcy5jaGFuSWR9LCIqIixhKX0pfXJlcGx5UlBDKHQpe3RoaXMuZW1pdEV2ZW50KHQpfXNlbmRFdmVudCh0KXt0aGlzLmVtaXRFdmVudCh0KX11bnJlZ2lzdGVyKCl7Z2xvYmFsVGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0aGlzLm9uTWVzc2FnZSl9Z2V0IHRhcmdldFdpbmRvdygpe3JldHVybiB0aGlzLnRhcmdldH19dmFyIEVlOyhmdW5jdGlvbihlKXtlLmF1ZGlvPSJhdWRpbyIsZS52aWRlbz0idmlkZW8iLGUuYXBpPSJhcGkifSkoRWV8fChFZT17fSkpO2FzeW5jIGZ1bmN0aW9uIHB0KGUpe3dpbmRvdy5wbHVnaW49e3BvcHVwTWFuYWdlcjp1dCgpLGlmcmFtZU1hbmFnZXI6bHQoKX07Y29uc3QgdD1uZXcgZHQod2luZG93LnBhcmVudCxBZShlLmlkKSksbj1hd2FpdCB0LmNhbGxSUEMoInN5biIsZSk7aWYoIW4uYWNrKXRocm93IG5ldyBFcnJvcihgQ2FuJ3QgcmVnaXN0ZXIgYSBwbHVnaW4uICR7SlNPTi5zdHJpbmdpZnkobil9YCk7Y29uc3QgYT1uZXcgTWFwLG89bmV3IE1hcCxpPW5ldyBNYXAsZj1uZXcgTWFwLGg9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLGc9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLGw9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHU9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHA9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLGI9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLFA9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLG09dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLGM9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHM9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHk9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLEE9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLFI9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHo9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLCQ9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHBlPXYoe2FsbG93RW1pdHRpbmdXaXRob3V0T2JzZXJ2ZXI6ITB9KSxmZT12KHthbGxvd0VtaXR0aW5nV2l0aG91dE9ic2VydmVyOiEwfSksZ2U9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLGhlPXYoe2FsbG93RW1pdHRpbmdXaXRob3V0T2JzZXJ2ZXI6ITB9KSxtZT12KHthbGxvd0VtaXR0aW5nV2l0aG91dE9ic2VydmVyOiEwfSksd2U9dih7YWxsb3dFbWl0dGluZ1dpdGhvdXRPYnNlcnZlcjohMH0pLHllPXYoe2FsbG93RW1pdHRpbmdXaXRob3V0T2JzZXJ2ZXI6ITB9KTt0LmFkZEV2ZW50TGlzdGVuZXIocj0+e3N3aXRjaChyLmV2ZW50KXtjYXNlInVpOmJ1dHRvbjpjbGljayI6YS5nZXQoci5wYXlsb2FkLmJ1dHRvbklkKT8ub25DbGljay5lbWl0KHIucGF5bG9hZC5pbnB1dCk7YnJlYWs7Y2FzZSJ1aTpmb3JtOmlucHV0IjppLmdldChyLnBheWxvYWQubW9kYWxJZCk/Lm9uSW5wdXQuZW1pdChyLnBheWxvYWQuaW5wdXQpO2JyZWFrO2Nhc2UidWk6cHJvbXB0OmlucHV0IjpmLmdldChyLnBheWxvYWQubW9kYWxJZCk/Lm9uSW5wdXQuZW1pdChyLnBheWxvYWQuaW5wdXQpO2JyZWFrO2Nhc2UicGFydGljaXBhbnQ6ZGlzY29ubmVjdGVkIjpvLmdldChyLnBheWxvYWQucGFydGljaXBhbnRVdWlkKT8ub25EaXNjb25uZWN0LmVtaXQoKSxvLmRlbGV0ZShyLnBheWxvYWQucGFydGljaXBhbnRVdWlkKTticmVhaztjYXNlImV2ZW50OmNvbmZlcmVuY2VTdGF0dXMiOmcuZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6Y29ubmVjdGVkIjpsLmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OmRpc2Nvbm5lY3RlZCI6dS5lbWl0KHIucGF5bG9hZCk7YnJlYWs7Y2FzZSJldmVudDp1c2VySW5pdGlhdGVkRGlzY29ubmVjdCI6cC5lbWl0KHIucGF5bG9hZCk7YnJlYWs7Y2FzZSJldmVudDptZSI6Yi5lbWl0KHIucGF5bG9hZCk7YnJlYWs7Y2FzZSJldmVudDptZXNzYWdlIjp5LmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OmRpcmVjdE1lc3NhZ2UiOkEuZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6YXBwbGljYXRpb25NZXNzYWdlIjpSLmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OnRyYW5zZmVyIjp6LmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OmNhbmNlbFRyYW5zZmVyIjokLmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OnN0YWdlIjpwZS5lbWl0KHIucGF5bG9hZCk7YnJlYWs7Y2FzZSJldmVudDpwYXJ0aWNpcGFudHMiOlAuZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6cGFydGljaXBhbnRMZWZ0IjpjLmVtaXQoci5wYXlsb2FkKSxvLmdldChyLnBheWxvYWQucGFydGljaXBhbnQudXVpZCk/Lm9uRGlzY29ubmVjdC5lbWl0KCksby5kZWxldGUoci5wYXlsb2FkLnBhcnRpY2lwYW50LnV1aWQpO2JyZWFrO2Nhc2UiZXZlbnQ6cGFydGljaXBhbnRKb2luZWQiOm0uZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6cmFpc2VIYW5kIjpzLmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OnByZXNlbnRhdGlvbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZSI6ZmUuZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6bGF5b3V0VXBkYXRlIjpnZS5lbWl0KHIucGF5bG9hZCk7YnJlYWs7Y2FzZSJldmVudDpjb25mZXJlbmNlOmF1dGhlbnRpY2F0ZWQiOmguZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6YnJlYWtvdXRCZWdpbiI6aGUuZW1pdChyLnBheWxvYWQpO2JyZWFrO2Nhc2UiZXZlbnQ6YnJlYWtvdXRFbmQiOm1lLmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50OmJyZWFrb3V0UmVmZXIiOndlLmVtaXQoci5wYXlsb2FkKTticmVhaztjYXNlImV2ZW50Omxhbmd1YWdlU2VsZWN0Ijp5ZS5lbWl0KHIucGF5bG9hZCk7YnJlYWt9fSk7Y29uc3QgQj1hc3luYyhyLGQpPT57Y29uc3Qgaz1hd2FpdCB0LmNhbGxSUEMoInVpOnJlbW92ZUVsZW1lbnQiLHtpZDpyfSk7aWYoay5zdGF0dXM9PT0iZmFpbGVkIilyZXR1cm4gUHJvbWlzZS5yZWplY3Qoe3JlYXNvbjprLnJlYXNvbn0pO2QmJmQoKX07cmV0dXJue3VpOnthZGRCdXR0b246YXN5bmMgcj0+e2NvbnN0IGQ9YXdhaXQgdC5jYWxsUlBDKCJ1aTpidXR0b246YWRkIixyKTtpZihkLnN0YXR1cz09PSJmYWlsZWQiKXJldHVybiBQcm9taXNlLnJlamVjdCh7cmVhc29uOmQucmVhc29ufSk7Y29uc3Qgaz17b25DbGljazp2KHthbGxvd0VtaXR0aW5nV2l0aG91dE9ic2VydmVyOiEwfSksdXBkYXRlOmFzeW5jIFQ9Pntjb25zdCBJPWF3YWl0IHQuY2FsbFJQQygidWk6YnV0dG9uOnVwZGF0ZSIsey4uLlQsdGFyZ2V0SWQ6ZC5pZH0pO3JldHVybiBJLnN0YXR1cz09PSJmYWlsZWQiP1Byb21pc2UucmVqZWN0KHtyZWFzb246SS5yZWFzb259KTpJLmRhdGF9LHJlbW92ZTooKT0+QihkLmlkLCgpPT5hLmRlbGV0ZShkLmlkKSl9O3JldHVybiBhLnNldChkLmlkLGspLGt9LGFkZEZvcm06YXN5bmMgcj0+e2NvbnN0IGQ9YXdhaXQgdC5jYWxsUlBDKCJ1aTpmb3JtOm9wZW4iLHIpO2lmKGQuc3RhdHVzPT09ImZhaWxlZCIpcmV0dXJuIFByb21pc2UucmVqZWN0KHtyZWFzb246ZC5yZWFzb259KTtjb25zdCBrPXtvbklucHV0OnYoKSxyZW1vdmU6KCk9PkIoZC5pZCwoKT0+aS5kZWxldGUoZC5pZCkpfTtyZXR1cm4gaS5zZXQoZC5pZCxrKSxrfSxzaG93Rm9ybTphc3luYyByPT57Y29uc3QgZD1hd2FpdCB0LmNhbGxSUEMoInVpOmZvcm06b3BlbiIscik7cmV0dXJuIGQuc3RhdHVzPT09ImZhaWxlZCI/UHJvbWlzZS5yZWplY3Qoe3JlYXNvbjpkLnJlYXNvbn0pOm5ldyBQcm9taXNlKGs9Pntjb25zdCBUPUk9PntJLmV2ZW50PT09InVpOmZvcm06aW5wdXQiJiZJLnBheWxvYWQubW9kYWxJZD09PWQuaWQmJihrKEkucGF5bG9hZC5pbnB1dCksQihkLmlkKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoVCkpfTt0LmFkZEV2ZW50TGlzdGVuZXIoVCl9KX0sYWRkUHJvbXB0OmFzeW5jIHI9Pntjb25zdCBkPWF3YWl0IHQuY2FsbFJQQygidWk6cHJvbXB0Om9wZW4iLHIpO2lmKGQuc3RhdHVzPT09ImZhaWxlZCIpcmV0dXJuIFByb21pc2UucmVqZWN0KHtyZWFzb246ZC5yZWFzb259KTtjb25zdCBrPXtvbklucHV0OnYoKSxyZW1vdmU6KCk9PkIoZC5pZCwoKT0+Zi5kZWxldGUoZC5pZCkpfTtyZXR1cm4gZi5zZXQoZC5pZCxrKSxrfSxzaG93UHJvbXB0OmFzeW5jIHI9Pntjb25zdCBkPWF3YWl0IHQuY2FsbFJQQygidWk6cHJvbXB0Om9wZW4iLHIpO3JldHVybiBkLnN0YXR1cz09PSJmYWlsZWQiP1Byb21pc2UucmVqZWN0KHtyZWFzb246ZC5yZWFzb259KTpuZXcgUHJvbWlzZShrPT57Y29uc3QgVD1JPT57SS5ldmVudD09PSJ1aTpwcm9tcHQ6aW5wdXQiJiZJLnBheWxvYWQubW9kYWxJZD09PWQuaWQmJihrKEkucGF5bG9hZC5pbnB1dCksQihkLmlkKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoVCkpfTt0LmFkZEV2ZW50TGlzdGVuZXIoVCl9KX0sc2hvd1RvYXN0OmFzeW5jIHI9Pntjb25zdCBkPWF3YWl0IHQuY2FsbFJQQygidWk6dG9hc3Q6c2hvdyIscik7aWYoZC5zdGF0dXM9PT0iZmFpbGVkIilyZXR1cm4gUHJvbWlzZS5yZWplY3Qoe3JlYXNvbjpkLnJlYXNvbn0pfSx0b2dnbGVQbHVnaW46YXN5bmMgcj0+e2NvbnN0IGQ9YXdhaXQgdC5jYWxsUlBDKCJ1aTpwbHVnaW46dG9nZ2xlIixyKTtpZihkLnN0YXR1cz09PSJmYWlsZWQiKXJldHVybiBQcm9taXNlLnJlamVjdCh7cmVhc29uOmQucmVhc29ufSl9fSxjb25mZXJlbmNlOntkaWFsT3V0OmFzeW5jIHI9PntsZXQgZDtjb25zdCBrPW5ldyBNYXA7bGV0IFQ9KCk9Pnt9O2NvbnN0IEk9bmV3IFByb21pc2UoR2U9PntUPW0uYWRkKCh7cGFydGljaXBhbnQ6R30pPT57ZD9kLmRhdGEucmVzdWx0LmluY2x1ZGVzKEcudXVpZCkmJkdlKEcpOmsuc2V0KEcudXVpZCxHKX0pfSk7ZD1hd2FpdCB0LmNhbGxSUEMoImNvbmZlcmVuY2U6ZGlhbE91dCIscik7Y29uc3QgVj1kPy5kYXRhLnJlc3VsdFswXTtpZighVil0aHJvdyBFcnJvcigiQ291bGQgbm90IGRpYWwgb3V0IHRvIHNwZWNpZmllZCB1cmkiKTtjb25zdCB6ZT1rLmdldChWKT8/YXdhaXQgSTtUKCk7Y29uc3QgdmU9ey4uLnplLG9uRGlzY29ubmVjdDp2KHthbGxvd0VtaXR0aW5nV2l0aG91dE9ic2VydmVyOiEwfSksZGlzY29ubmVjdDphc3luYygpPT4oby5kZWxldGUoViksdC5jYWxsUlBDKCJwYXJ0aWNpcGFudDpkaXNjb25uZWN0Iix7cGFydGljaXBhbnRVdWlkOlZ9KSl9O3JldHVybiBvLnNldChWLHZlKSx2ZX0sc2VuZE1lc3NhZ2U6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOnNlbmRNZXNzYWdlIixyKSxzZW5kQXBwbGljYXRpb25NZXNzYWdlOmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpzZW5kQXBwbGljYXRpb25NZXNzYWdlIixyKSxsb2NrOmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpsb2NrIixyKSxtdXRlQWxsR3Vlc3RzOmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTptdXRlQWxsR3Vlc3RzIixyKSxzZXRCYW5kd2lkdGg6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOnNldEJhbmR3aWR0aCIsciksc2V0TGF5b3V0OmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpzZXRMYXlvdXQiLHIpLGRpc2Nvbm5lY3RBbGw6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOmRpc2Nvbm5lY3RBbGwiLHIpLHJlcXVlc3RQYXJ0aWNpcGFudHM6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOnJlcXVlc3RQYXJ0aWNpcGFudHMiLHIpLHNlbmRSZXF1ZXN0OmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpzZW5kUmVxdWVzdCIsciksdHJhbnNmZXI6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJwYXJ0aWNpcGFudDp0cmFuc2ZlciIsciksbXV0ZTphc3luYyByPT5hd2FpdCB0LmNhbGxSUEMoInBhcnRpY2lwYW50Om11dGUiLHIpLG11dGVWaWRlbzphc3luYyByPT5hd2FpdCB0LmNhbGxSUEMoInBhcnRpY2lwYW50Om11dGVWaWRlbyIsciksc3BvdGxpZ2h0OmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygicGFydGljaXBhbnQ6c3BvdGxpZ2h0IixyKSxhZG1pdDphc3luYyByPT5hd2FpdCB0LmNhbGxSUEMoInBhcnRpY2lwYW50OmFkbWl0IixyKSxyYWlzZUhhbmQ6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJwYXJ0aWNpcGFudDpyYWlzZUhhbmQiLHIpLHNldFJvbGU6YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJwYXJ0aWNpcGFudDpzZXRSb2xlIixyKSxzZXRUZXh0T3ZlcmxheTphc3luYyByPT5hd2FpdCB0LmNhbGxSUEMoInBhcnRpY2lwYW50OnNldFRleHRPdmVybGF5IixyKSxzZW5kRFRNRjphc3luYyByPT5hd2FpdCB0LmNhbGxSUEMoInBhcnRpY2lwYW50OnNlbmREVE1GIixyKSxkaXNjb25uZWN0OmFzeW5jIHI9Pntjb25zdCBkPXIucGFydGljaXBhbnRVdWlkO3JldHVybiBvLmRlbGV0ZShkKSxhd2FpdCB0LmNhbGxSUEMoInBhcnRpY2lwYW50OmRpc2Nvbm5lY3QiLHtwYXJ0aWNpcGFudFV1aWQ6ZH0pfSxicmVha291dDphc3luYyByPT5hd2FpdCB0LmNhbGxSUEMoImNvbmZlcmVuY2U6YnJlYWtvdXQiLHIpLGpvaW5CcmVha291dFJvb206YXN5bmMgcj0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOmpvaW5CcmVha291dFJvb20iLHIpLGNsb3NlQnJlYWtvdXRzOmFzeW5jKCk9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpjbG9zZUJyZWFrb3V0cyIse30pLGNsb3NlQnJlYWtvdXRSb29tOmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpjbG9zZUJyZWFrb3V0Um9vbSIsciksZW1wdHlCcmVha291dHM6YXN5bmMoKT0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOmVtcHR5QnJlYWtvdXRzIix7fSksYnJlYWtvdXRNb3ZlUGFydGljaXBhbnRzOmFzeW5jIHI9PmF3YWl0IHQuY2FsbFJQQygiY29uZmVyZW5jZTpicmVha291dE1vdmVQYXJ0aWNpcGFudHMiLHIpLGdldEN1cnJlbnRSb29tSWQ6YXN5bmMoKT0+YXdhaXQgdC5jYWxsUlBDKCJjb25mZXJlbmNlOmN1cnJlbnRSb29tSWQiLHZvaWQgMCl9LGV2ZW50czp7YXV0aGVudGljYXRlZFdpdGhDb25mZXJlbmNlOmgsY29uZmVyZW5jZVN0YXR1czpnLGNvbm5lY3RlZDpsLGRpc2Nvbm5lY3RlZDp1LHVzZXJJbml0aWF0ZWREaXNjb25uZWN0OnAsbWU6YixtZXNzYWdlOnksZGlyZWN0TWVzc2FnZTpBLGFwcGxpY2F0aW9uTWVzc2FnZTpSLHRyYW5zZmVyOnosY2FuY2VsVHJhbnNmZXI6JCxzdGFnZTpwZSxwYXJ0aWNpcGFudHM6UCxwYXJ0aWNpcGFudEpvaW5lZDptLHBhcnRpY2lwYW50TGVmdDpjLHJhaXNlSGFuZDpzLHByZXNlbnRhdGlvbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZTpmZSxsYXlvdXRVcGRhdGU6Z2UsYnJlYWtvdXRCZWdpbjpoZSxicmVha291dEVuZDptZSxicmVha291dFJlZmVyOndlLGxhbmd1YWdlU2VsZWN0OnllfX19ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX12YXIgdGU9e2V4cG9ydHM6e319LGtlO2Z1bmN0aW9uIGd0KCl7cmV0dXJuIGtlfHwoa2U9MSxmdW5jdGlvbihlKXt2YXIgdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG49In4iO2Z1bmN0aW9uIGEoKXt9T2JqZWN0LmNyZWF0ZSYmKGEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksbmV3IGEoKS5fX3Byb3RvX198fChuPSExKSk7ZnVuY3Rpb24gbyhnLGwsdSl7dGhpcy5mbj1nLHRoaXMuY29udGV4dD1sLHRoaXMub25jZT11fHwhMX1mdW5jdGlvbiBpKGcsbCx1LHAsYil7aWYodHlwZW9mIHUhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbiIpO3ZhciBQPW5ldyBvKHUscHx8ZyxiKSxtPW4/bitsOmw7cmV0dXJuIGcuX2V2ZW50c1ttXT9nLl9ldmVudHNbbV0uZm4/Zy5fZXZlbnRzW21dPVtnLl9ldmVudHNbbV0sUF06Zy5fZXZlbnRzW21dLnB1c2goUCk6KGcuX2V2ZW50c1ttXT1QLGcuX2V2ZW50c0NvdW50KyspLGd9ZnVuY3Rpb24gZihnLGwpey0tZy5fZXZlbnRzQ291bnQ9PT0wP2cuX2V2ZW50cz1uZXcgYTpkZWxldGUgZy5fZXZlbnRzW2xdfWZ1bmN0aW9uIGgoKXt0aGlzLl9ldmVudHM9bmV3IGEsdGhpcy5fZXZlbnRzQ291bnQ9MH1oLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7dmFyIGw9W10sdSxwO2lmKHRoaXMuX2V2ZW50c0NvdW50PT09MClyZXR1cm4gbDtmb3IocCBpbiB1PXRoaXMuX2V2ZW50cyl0LmNhbGwodSxwKSYmbC5wdXNoKG4/cC5zbGljZSgxKTpwKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9sLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHUpKTpsfSxoLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24obCl7dmFyIHU9bj9uK2w6bCxwPXRoaXMuX2V2ZW50c1t1XTtpZighcClyZXR1cm5bXTtpZihwLmZuKXJldHVybltwLmZuXTtmb3IodmFyIGI9MCxQPXAubGVuZ3RoLG09bmV3IEFycmF5KFApO2I8UDtiKyspbVtiXT1wW2JdLmZuO3JldHVybiBtfSxoLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGwpe3ZhciB1PW4/bitsOmwscD10aGlzLl9ldmVudHNbdV07cmV0dXJuIHA/cC5mbj8xOnAubGVuZ3RoOjB9LGgucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24obCx1LHAsYixQLG0pe3ZhciBjPW4/bitsOmw7aWYoIXRoaXMuX2V2ZW50c1tjXSlyZXR1cm4hMTt2YXIgcz10aGlzLl9ldmVudHNbY10seT1hcmd1bWVudHMubGVuZ3RoLEEsUjtpZihzLmZuKXtzd2l0Y2gocy5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGwscy5mbix2b2lkIDAsITApLHkpe2Nhc2UgMTpyZXR1cm4gcy5mbi5jYWxsKHMuY29udGV4dCksITA7Y2FzZSAyOnJldHVybiBzLmZuLmNhbGwocy5jb250ZXh0LHUpLCEwO2Nhc2UgMzpyZXR1cm4gcy5mbi5jYWxsKHMuY29udGV4dCx1LHApLCEwO2Nhc2UgNDpyZXR1cm4gcy5mbi5jYWxsKHMuY29udGV4dCx1LHAsYiksITA7Y2FzZSA1OnJldHVybiBzLmZuLmNhbGwocy5jb250ZXh0LHUscCxiLFApLCEwO2Nhc2UgNjpyZXR1cm4gcy5mbi5jYWxsKHMuY29udGV4dCx1LHAsYixQLG0pLCEwfWZvcihSPTEsQT1uZXcgQXJyYXkoeS0xKTtSPHk7UisrKUFbUi0xXT1hcmd1bWVudHNbUl07cy5mbi5hcHBseShzLmNvbnRleHQsQSl9ZWxzZXt2YXIgej1zLmxlbmd0aCwkO2ZvcihSPTA7Ujx6O1IrKylzd2l0Y2goc1tSXS5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGwsc1tSXS5mbix2b2lkIDAsITApLHkpe2Nhc2UgMTpzW1JdLmZuLmNhbGwoc1tSXS5jb250ZXh0KTticmVhaztjYXNlIDI6c1tSXS5mbi5jYWxsKHNbUl0uY29udGV4dCx1KTticmVhaztjYXNlIDM6c1tSXS5mbi5jYWxsKHNbUl0uY29udGV4dCx1LHApO2JyZWFrO2Nhc2UgNDpzW1JdLmZuLmNhbGwoc1tSXS5jb250ZXh0LHUscCxiKTticmVhaztkZWZhdWx0OmlmKCFBKWZvcigkPTEsQT1uZXcgQXJyYXkoeS0xKTskPHk7JCsrKUFbJC0xXT1hcmd1bWVudHNbJF07c1tSXS5mbi5hcHBseShzW1JdLmNvbnRleHQsQSl9fXJldHVybiEwfSxoLnByb3RvdHlwZS5vbj1mdW5jdGlvbihsLHUscCl7cmV0dXJuIGkodGhpcyxsLHUscCwhMSl9LGgucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24obCx1LHApe3JldHVybiBpKHRoaXMsbCx1LHAsITApfSxoLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihsLHUscCxiKXt2YXIgUD1uP24rbDpsO2lmKCF0aGlzLl9ldmVudHNbUF0pcmV0dXJuIHRoaXM7aWYoIXUpcmV0dXJuIGYodGhpcyxQKSx0aGlzO3ZhciBtPXRoaXMuX2V2ZW50c1tQXTtpZihtLmZuKW0uZm49PT11JiYoIWJ8fG0ub25jZSkmJighcHx8bS5jb250ZXh0PT09cCkmJmYodGhpcyxQKTtlbHNle2Zvcih2YXIgYz0wLHM9W10seT1tLmxlbmd0aDtjPHk7YysrKShtW2NdLmZuIT09dXx8YiYmIW1bY10ub25jZXx8cCYmbVtjXS5jb250ZXh0IT09cCkmJnMucHVzaChtW2NdKTtzLmxlbmd0aD90aGlzLl9ldmVudHNbUF09cy5sZW5ndGg9PT0xP3NbMF06czpmKHRoaXMsUCl9cmV0dXJuIHRoaXN9LGgucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihsKXt2YXIgdTtyZXR1cm4gbD8odT1uP24rbDpsLHRoaXMuX2V2ZW50c1t1XSYmZih0aGlzLHUpKToodGhpcy5fZXZlbnRzPW5ldyBhLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXN9LGgucHJvdG90eXBlLm9mZj1oLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixoLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1oLnByb3RvdHlwZS5vbixoLnByZWZpeGVkPW4saC5FdmVudEVtaXR0ZXI9aCxlLmV4cG9ydHM9aH0odGUpKSx0ZS5leHBvcnRzfXZhciBodD1ndCgpO2NvbnN0IFRlPWZ0KGh0KTtsZXQgRTtjb25zdCBtdD1lPT57RT1lfTtsZXQgWT17Y29uZmVyZW5jZUFsaWFzOiIiLGNvbmZlcmVuY2VOYW1lOnZvaWQgMH07Y29uc3Qgd3Q9KGUsdCk9PntZPXtjb25mZXJlbmNlQWxpYXM6ZSxjb25mZXJlbmNlTmFtZTp0fX0sQ2U9YXN5bmMgZT0+e2F3YWl0IEUuY29uZmVyZW5jZS5zZXRMYXlvdXQoe3RyYW5zZm9ybXM6e3JlY29yZGluZ19pbmRpY2F0b3I6ZX19KX0seXQ9YXN5bmMgZT0+e3RyeXthd2FpdCBFLmNvbmZlcmVuY2Uuc2V0Um9sZSh7cm9sZToiY2hhaXIiLHBhcnRpY2lwYW50VXVpZDplfSksYXdhaXQgRS5jb25mZXJlbmNlLnNldFJvbGUoe3JvbGU6Imd1ZXN0IixwYXJ0aWNpcGFudFV1aWQ6ZX0pfWNhdGNoe319LHZ0PWF3YWl0IGZldGNoKCIuL2NvbmZpZy5qc29uIiksdz1hd2FpdCB2dC5qc29uKCksT2U9InBleGlwLXZicmljayI7dmFyIE49KGU9PihlLlVzZXI9YCR7T2V9OnVzZXJgLGUuUmVjb3JkaW5nPWAke09lfTpyZWNvcmRpbmdgLGUpKShOfHx7fSk7ZnVuY3Rpb24gVWUoZSl7dHJ5e2NvbnN0IHQ9Z2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKTtpZih0IT1udWxsKXJldHVybiBKU09OLnBhcnNlKHQpfWNhdGNoe31yZXR1cm4gbnVsbH1mdW5jdGlvbiBhZShlLHQpe3RyeXt0PT1udWxsP2dsb2JhbFRoaXMubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSk6Z2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLEpTT04uc3RyaW5naWZ5KHQpKX1jYXRjaHt9fWxldCBPPVVlKE4uVXNlcik7Y29uc3QgaWU9ZT0+e089ZSxhZShOLlVzZXIsTyl9O2xldCByZT0iIjtjb25zdCBNZT0yMCwkZT0xODAwO2xldCBKPTA7Y29uc3QgYnQ9YXN5bmMoKT0+e2NvbnN0IGU9Ii9hcGkvdjIvb2F1dGgyL2F1dGhvcml6ZSIsdD1uZXcgVVJMKGUsdy52YnJpY2sudXJsKTtyZXR1cm4gdC5zZWFyY2hQYXJhbXMuc2V0KCJjbGllbnRfaWQiLHcudmJyaWNrLmNsaWVudF9pZCksdC5zZWFyY2hQYXJhbXMuc2V0KCJjb2RlX2NoYWxsZW5nZSIsYXdhaXQgSXQoKSksdC5zZWFyY2hQYXJhbXMuc2V0KCJyZXNwb25zZV90eXBlIiwiY29kZSIpLHQuc2VhcmNoUGFyYW1zLnNldCgicmVkaXJlY3RfdXJpIix3LnZicmljay5yZWRpcmVjdF91cmkpLHQudG9TdHJpbmcoKX0sUnQ9YXN5bmMgZT0+e2NvbnN0IHQ9Ii9hcGkvdjIvb2F1dGgyL3Rva2VuIixuPW5ldyBVUkwodCx3LnZicmljay51cmwpLGE9e2NvZGU6ZS5yZXBsYWNlKC8gL2csIisiKSxncmFudF90eXBlOiJhdXRob3JpemF0aW9uX2NvZGUiLGNsaWVudF9pZDp3LnZicmljay5jbGllbnRfaWQscmVkaXJlY3RfdXJpOncudmJyaWNrLnJlZGlyZWN0X3VyaSxjb2RlX3ZlcmlmaWVyOnJlfSxpPWF3YWl0KGF3YWl0IGZldGNoKG4se21ldGhvZDoiUE9TVCIsYm9keTpKU09OLnN0cmluZ2lmeShhKSxoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSkpLmpzb24oKTtpLmV4cGlyYXRpb249bmV3IERhdGUoRGF0ZS5ub3coKStpLmV4cGlyZXNfaW4qMWUzKSxpZShpKSxKPT09MCYmamUoTz8uZXhwaXJlc19pbj8/JGUtTWUpLEsuZW1pdCgibG9naW4iKX0sUHQ9KCk9Pk8/LmFjY2Vzc190b2tlbj8/IiIsRXQ9KCk9Pk8sWj0oKT0+TyE9bnVsbCYmTy5hY2Nlc3NfdG9rZW4hPT0iIixzZT0oKT0+KHthdXRob3JpemF0aW9uOmB2YnJpY2sgJHtPPy5hY2Nlc3NfdG9rZW59YH0pLHhlPWFzeW5jKCk9PntpZihPPT1udWxsfHwhWigpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlY292ZXIgdGhlIHVzZXIgaW5mbyBmcm9tIHRoZSBsb2NhbFN0b3JhZ2UiKTtjb25zdCBlPSIvYXBpL3YyL3VzZXIvZXh0ZW5kLXNlc3Npb24iLHQ9bmV3IFVSTChlLHcudmJyaWNrLnVybCksbj1hd2FpdCBmZXRjaCh0LHttZXRob2Q6IlBPU1QiLGhlYWRlcnM6c2UoKX0pLHtleHBpcmF0aW9uOmF9PWF3YWl0IG4uanNvbigpLG89bmV3IERhdGUoYSkuZ2V0VGltZSgpLURhdGUubm93KCk7Ty5leHBpcmVzX2luPWlzTmFOKG8pPyRlOk1hdGguZmxvb3Ioby8xZTMpLGllKE8pLEo9PT0wJiZqZShPLmV4cGlyZXNfaW4tTWUpLEsuZW1pdCgicmVmcmVzaGVkX3Rva2VuIil9LGt0PWFzeW5jKCk9Pntjb25zdCBlPSIvYXBpL3YyL3VzZXIvc2Vzc2lvbiIsdD1uZXcgVVJMKGUsdy52YnJpY2sudXJsKTtyZXR1cm4gWigpPyhhd2FpdCBmZXRjaCh0LHtoZWFkZXJzOnNlKCl9KS5jYXRjaChhPT57Y29uc29sZS5lcnJvcihhKX0pKT8uc3RhdHVzPT09MjAwOiExfSxDdD1hc3luYygpPT57Y29uc3QgZT0iL2FwaS92Mi91c2VyL2xvZ29mZiIsdD1uZXcgVVJMKGUsdy52YnJpY2sudXJsKTtPIT1udWxsJiZaKCkmJmF3YWl0IGZldGNoKHQse21ldGhvZDoiUE9TVCIsYm9keTpKU09OLnN0cmluZ2lmeSh7dXNlcklkOk8udXNlcklkfSksaGVhZGVyczp7Li4uc2UoKSwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSkuY2F0Y2gobj0+e2NvbnNvbGUud2FybihuKX0pLFdlKCksT3QoKSxLLmVtaXQoImxvZ291dCIpfSxXZT0oKT0+e2llKG51bGwpfSxqZT1lPT57Sj1zZXRJbnRlcnZhbCgoKT0+e3hlKCkuY2F0Y2godD0+e2NvbnNvbGUuZXJyb3IodCl9KX0sZSoxZTMpfSxPdD0oKT0+e2NsZWFySW50ZXJ2YWwoSiksSj0wfSxLPW5ldyBUZSxTPXtnZXRBdXRoVXJsOmJ0LGNyZWF0ZUFjY2Vzc1Rva2VuOlJ0LGdldEFjY2Vzc1Rva2VuOlB0LGdldFVzZXI6RXQsaXNBdXRoZW50aWNhdGVkOloscmVmcmVzaEFjY2Vzc1Rva2VuOnhlLGlzU2Vzc2lvblZhbGlkOmt0LGxvZ291dDpDdCxjbGVhblNlc3Npb246V2UsZW1pdHRlcjpLfSxJdD1hc3luYygpPT4ocmU9U3QoNDgpLGF3YWl0IF90KHJlKSksU3Q9ZT0+e2NvbnN0IHQ9Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShlLzIpKTtyZXR1cm4gQXJyYXkuZnJvbSh0KS5tYXAobj0+bi50b1N0cmluZygxNikucGFkU3RhcnQoMiwiMCIpKS5qb2luKCIiKX0sX3Q9YXN5bmMgZT0+e2NvbnN0IHQ9bmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGUpLG49YXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoIlNIQS0yNTYiLHQpLGE9U3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShuKSk7cmV0dXJuIGJ0b2EoYSkucmVwbGFjZSgvXC8vZywiXyIpLnJlcGxhY2UoL1wrL2csIi0iKS5yZXBsYWNlKC89KyQvLCIiKX0sQXQ9ZT0+e2NvbnN0e2RhdGE6e3NlYXJjaDp0fX09ZTtpZih0IT1udWxsJiZ0IT09IiIpe2NvbnN0IG49bmV3IFVSTFNlYXJjaFBhcmFtcyh0KS5nZXQoImNvZGUiKTtuIT1udWxsJiYoY29uc29sZS5sb2coImNvZGUiLG4pLFMuY3JlYXRlQWNjZXNzVG9rZW4obikuY2F0Y2goY29uc29sZS5lcnJvcikpfX07d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLEF0KTthc3luYyBmdW5jdGlvbiBMKGUsdCxuKXtjb25zdHt0aW1lb3V0U2Vjb25kczphPTB9PW4/P3t9LG89VHQobix0KTt0cnl7Y29uc3QgaT1hPjA/YXdhaXQgY2UoZmV0Y2goZSxvKSxhKTphd2FpdCBmZXRjaChlLG8pO3JldHVybiBpLnN0YXR1cyE9PTIwMD97c3VjY2VzczohMSxlcnJvcjpgJHtpLnN0YXR1c30gJHtpLnN0YXR1c1RleHR9YH06e3N1Y2Nlc3M6ITAsZGF0YTphd2FpdCBpLmpzb24oKS5jYXRjaCgoKT0+e30pfX1jYXRjaChpKXtyZXR1cm57c3VjY2VzczohMSxlcnJvcjppPy50b1N0cmluZz8uKCk/PyJSZXF1ZXN0IEZhaWxlZCJ9fX1mdW5jdGlvbiBUdChlLHQpe2NvbnN0IG49bmV3IEhlYWRlcnMoZT8uaGVhZGVycyksYT1TLmdldEFjY2Vzc1Rva2VuKCk7YSE9PSIiJiZuLnNldCgiYXV0aG9yaXphdGlvbiIsYFZicmljayAke2F9YCk7Y29uc3Qgbz17Li4uZSxoZWFkZXJzOm59O3JldHVybiB0PT1udWxsfHwoL3B1dHxwb3N0fHBhdGNoL2kudGVzdChvLm1ldGhvZD8/IiIpPyhuLnNldCgiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24vanNvbiIpLG8uYm9keT1KU09OLnN0cmluZ2lmeSh0KSk6T2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoW2ksZl0pPT57bi5zZXQoaSxmKX0pKSxvfWFzeW5jIGZ1bmN0aW9uIGNlKGUsdCl7bGV0IG49LTE7cmV0dXJuIGF3YWl0IFByb21pc2UucmFjZShbZSxuZXcgUHJvbWlzZSgoYSxvKT0+e249c2V0VGltZW91dCgoKT0+e28obmV3IERPTUV4Y2VwdGlvbigiVGltZW91dCIsIlRpbWVvdXRFcnJvciIpKX0sdCoxZTMpfSldKS5maW5hbGx5KCgpPT57Y2xlYXJUaW1lb3V0KG4pfSl9bGV0IERlPVtdO2NvbnN0IFV0PWU9PntEZT1lfSxOZT1lPT5EZS5maW5kKGUpLE10PSh7c2VydmljZVR5cGU6ZX0sdD0hMSk9PnQ/ZT09PSJjb25uZWN0aW5nIj8iQ29ubmVjdGluZ0ZhaWxlZCI6IlJlY29yZGluZ0ZpbmlzaGVkIjplPT09ImNvbm5lY3RpbmciPyJXYWl0aW5nRm9yU3RyZWFtIjoiUmVjb3JkaW5nIiwkdD1hc3luYyhlPTE1KT0+e2NvbnN0IHQ9UHJvbWlzZS5hbGwoW25ldyBQcm9taXNlKG49PkUuZXZlbnRzLnBhcnRpY2lwYW50cy5hZGRPbmNlKCgpPT57bigpfSkpLG5ldyBQcm9taXNlKG49PkUuZXZlbnRzLmF1dGhlbnRpY2F0ZWRXaXRoQ29uZmVyZW5jZS5hZGRPbmNlKCgpPT57bigpfSkpXSk7YXdhaXQgY2UodCxlKX07bGV0IF89VWUoTi5SZWNvcmRpbmcpO2NvbnN0IExlPShlPW51bGwpPT57Xz1lLGFlKE4uUmVjb3JkaW5nLF8pfSxGPSgpPT5fLEZlPSgpPT57Xz1udWxsLGFlKE4uUmVjb3JkaW5nLG51bGwpfSxYPWU9PntfIT1udWxsJiZMZShPYmplY3QuYXNzaWduKF8sZSkpfSx4dD1bIlJlY29yZGluZyIsIkNvbm5lY3RpbmciLCJXYWl0aW5nRm9yU3RyZWFtIiwiUmVjb3JkaW5nU3RyZWFtIiwiU3RhcnRSZWNvcmRpbmciLCJSZWNvcmRpbmdJbml0aWFsaXppbmciLCJTdG9wUmVjb3JkaW5nIl0sQmU9KCk9Pntjb25zdCBlPXcucmVjb3JkaW5nX3R5cGU9PT0icnRtcCI/Xz8ucnRtcFN0cmVhbUtleTpfPy52aWRlb0lkO3JldHVybiBlIT1udWxsJiZlIT09IiJ9LHVlPSgpPT5CZSgpJiZ0eXBlb2YgXz8uc3RhdHVzPT0ic3RyaW5nIiYmeHQuaW5jbHVkZXMoXy5zdGF0dXMpLFE9KCk9Pl8/LnN0YXR1cz09PSJDb25uZWN0aW5nInx8Xz8uc3RhdHVzPT09IldhaXRpbmdGb3JTdHJlYW0iLFd0PSgpPT4hUSgpJiZ1ZSgpO2FzeW5jIGZ1bmN0aW9uIGp0KGUsdD02MCl7Y29uc3Qgbj0iL3JlY2FwaS92MC9ydG1wL3N0YXJ0LXJlY29yZGluZyIsYT1uZXcgVVJMKG4sdy5yZWNvcmRlci51cmwpLG89e3RpdGxlOmUscm91dGU6dy5yZWNvcmRlci5yb3V0ZSwuLi5ZfSxpPWF3YWl0IEwoYSxvLHttZXRob2Q6IlBPU1QiLHRpbWVvdXRTZWNvbmRzOnR9KTtyZXR1cm4gaS5zdWNjZXNzJiZEdChpLmRhdGEucnRtcFVybCksaX1hc3luYyBmdW5jdGlvbiBEdChlKXtyZXR1cm4gYXdhaXQgRS5jb25mZXJlbmNlLmRpYWxPdXQoe2Rlc3RpbmF0aW9uOmUscHJvdG9jb2w6dy5yZWNvcmRlci5sZWdhY3lfZGlhbG91dF9hcGk9PT0hMD8icnRtcCI6ImF1dG8iLHJvbGU6IkdVRVNUIixzdHJlYW1pbmc6InllcyIsLi4udy5yZWNvcmRlci5kaXNwbGF5X25hbWUhPW51bGwmJnt0ZXh0OncucmVjb3JkZXIuZGlzcGxheV9uYW1lfX0pfWFzeW5jIGZ1bmN0aW9uIE50KHtydG1wU3RyZWFtS2V5OmV9KXtpZihlPT1udWxsfHxlPT09IiIpcmV0dXJue3N1Y2Nlc3M6ITAsZGF0YTp2b2lkIDB9O2NvbnN0IHQ9Ii9yZWNhcGkvdjAvcnRtcC9zdG9wLXJlY29yZGluZyIsbj1uZXcgVVJMKHQsdy5yZWNvcmRlci51cmwpO3JldHVybiBhd2FpdCBMKG4se3J0bXBTdHJlYW1LZXk6ZX0se21ldGhvZDoiUE9TVCJ9KX1hc3luYyBmdW5jdGlvbiBMdCh7cnRtcFN0cmVhbUtleTplfSl7Y29uc3QgdD1gL3JlY2FwaS92MC9ydG1wL3JlY29yZGluZy1zdGF0dXMvJHtlfWAsbj1uZXcgVVJMKHQsdy5yZWNvcmRlci51cmwpLGE9YXdhaXQgTChuKTtyZXR1cm4gYS5zdWNjZXNzJiZBcnJheS5pc0FycmF5KGEuZGF0YSkmJihhLmRhdGE9YS5kYXRhWzBdKSxhfWZ1bmN0aW9uIEZ0KGUpe3RyeXtyZXR1cm4gbmV3IFVSTChlKX1jYXRjaHtyZXR1cm59fWNvbnN0IEllPXcucmVjb3JkaW5nX3R5cGU9PT0icnRtcCI/RnQody5yZWNvcmRlci51cmwpPy5ob3N0bmFtZTp2b2lkIDAsQnQ9KHt1cmk6ZX0pPT57aWYoIS9ecnRtcHM/OlwvXC8vLnRlc3QoZSl8fEllPT1udWxsKXJldHVybiExO2NvbnN0e3J0bXBVcmw6dH09RigpPz97fTtyZXR1cm4gdCE9bnVsbCYmZT09PXQ/ITA6bmV3IFVSTChlLnJlcGxhY2UoL15ydG1wLywiaHR0cCIpKS5ob3N0bmFtZT09PUllfSxWdD17c3RhcnRSZWNvcmRpbmc6anQsc3RvcFJlY29yZGluZzpOdCxnZXRTdGF0dXM6THQsaXNSZWNvcmRpbmdQYXJ0aWNpcGFudDpCdH07YXN5bmMgZnVuY3Rpb24gSnQoZSx0PTYwKXtjb25zdCBuPSIvYXBpL3YyL3ZjL3N0YXJ0LXJlY29yZGluZyIsYT1uZXcgVVJMKG4sdy52YnJpY2sudXJsKSxvPXcuaW5maW5pdHkuc2lwX2RvbWFpbixpPWAke1kuY29uZmVyZW5jZUFsaWFzfUAke299YDtyZXR1cm4gYXdhaXQgTChhLHt0aXRsZTplLHNpcEFkZHJlc3M6aSxzaXBQaW46IiJ9LHttZXRob2Q6IlBPU1QiLHRpbWVvdXRTZWNvbmRzOnR9KX1hc3luYyBmdW5jdGlvbiBIdCh7dmlkZW9JZDplfSl7Y29uc3QgdD0iL2FwaS92Mi92Yy9zdG9wLXJlY29yZGluZyIsbj1uZXcgVVJMKHQsdy52YnJpY2sudXJsKTtyZXR1cm4gYXdhaXQgTChuLHt2aWRlb0lkOmV9LHttZXRob2Q6IlBPU1QifSl9YXN5bmMgZnVuY3Rpb24genQoe3ZpZGVvSWQ6ZX0pe2NvbnN0IHQ9YC9hcGkvdjIvdmMvcmVjb3JkaW5nLXN0YXR1cy8ke2V9YCxuPW5ldyBVUkwodCx3LnZicmljay51cmwpLGE9YXdhaXQgTChuKTtyZXR1cm4gYS5zdWNjZXNzP3tzdWNjZXNzOiEwLGRhdGE6e3ZpZGVvSWQ6ZSxzdGF0dXM6YS5kYXRhfX06YX1jb25zdCBHdD1lPT57Y29uc3R7aG9zdG5hbWU6dH09bmV3IFVSTCh3LnZicmljay51cmwpLG49YHNpcDoke1MuZ2V0VXNlcigpPy51c2VybmFtZX1AJHt0fWA7cmV0dXJuIGUudXJpPT09bn0scXQ9e3N0YXJ0UmVjb3JkaW5nOkp0LHN0b3BSZWNvcmRpbmc6SHQsZ2V0U3RhdHVzOnp0LGlzUmVjb3JkaW5nUGFydGljaXBhbnQ6R3R9LFc9dy5yZWNvcmRpbmdfdHlwZT09PSJydG1wIj9WdDpxdCxYdD0oKT0+e2NvbnN0IGU9W0UuZXZlbnRzLnBhcnRpY2lwYW50Sm9pbmVkLmFkZChhc3luYyh7cGFydGljaXBhbnQ6dH0pPT57Vy5pc1JlY29yZGluZ1BhcnRpY2lwYW50KHQpJiYoUSgpJiZuZSh0KSxDZSghMCksYXdhaXQgeXQodC51dWlkKSl9KSxFLmV2ZW50cy5wYXJ0aWNpcGFudExlZnQuYWRkKCh7cGFydGljaXBhbnQ6dH0pPT57Vy5pc1JlY29yZGluZ1BhcnRpY2lwYW50KHQpJiYobmUodCwhMCksQ2UoITEpKX0pLEUuZXZlbnRzLnBhcnRpY2lwYW50cy5hZGQoKHtwYXJ0aWNpcGFudHM6dH0pPT57VXQodCksUSgpJiZuZSgpfSldO0UuZXZlbnRzLm1lLmFkZE9uY2UoKHtwYXJ0aWNpcGFudDp0fSk9Pnt0LnJvbGU9PT0iY2hhaXIiP1F0KCk6ZS5mb3JFYWNoKG49PntuKCl9KX0pfTtmdW5jdGlvbiBuZShlLHQ9ITEpe2NvbnN0IG49RigpO2lmKGU/Pz1sZSgpLG49PW51bGx8fGU9PW51bGx8fG4ucGFydGljaXBhbnRVdWlkIT1udWxsJiZlLnV1aWQhPT1uLnBhcnRpY2lwYW50VXVpZClyZXR1cm47Y29uc3QgYT1NdChlLHQpO24uc3RhdHVzIT09YSYmKFgoe3N0YXR1czphLHBhcnRpY2lwYW50VXVpZDplLnV1aWR9KSxNLmVtaXQoImNoYW5nZWQiKSl9YXN5bmMgZnVuY3Rpb24gUXQoKXtpZighKCF1ZSgpfHxkZSgpKSl7dHJ5e2F3YWl0ICR0KDE1KS5jYXRjaChhPT57Y29uc29sZS53YXJuKCJUaW1lb3V0IHdhaXRpbmcgZm9yIHBhcnRpY2lwYW50IGxpc3Qgb24gZmlyc3Qgam9pbiIsYSl9KTtjb25zdCBlPUYoKSx0PWxlKCksbj10IT1udWxsJiZlPy5wYXJ0aWNpcGFudFV1aWQ9PT10LnV1aWQ7aWYoV3QoKSYmbilyZXR1cm59Y2F0Y2goZSl7Y29uc29sZS5lcnJvcigiRmFpbGVkIHRvIHJlZnJlc2ggcmVjb3JkaW5nIHN0YXR1cyIsZSl9RmUoKSxNLmVtaXQoImNoYW5nZWQiKX19Y29uc3QgWXQ9YXN5bmMoKT0+e2lmKGRlKCkpe2F3YWl0IEUudWkuc2hvd1RvYXN0KHttZXNzYWdlOiJBbm90aGVyIHVzZXIgaGFzIGFscmVhZHkgZW5hYmxlZCB0aGUgcmVjb3JkaW5nIn0pO3JldHVybn1jb25zdCBlPXcuaW5maW5pdHkuc2lwX2RvbWFpbix0PWAke1kuY29uZmVyZW5jZUFsaWFzfUAke2V9YCxuPWF3YWl0IFcuc3RhcnRSZWNvcmRpbmcodCk7bi5zdWNjZXNzPyhMZSh7c3RhdHVzOiJDb25uZWN0aW5nIiwuLi5uLmRhdGF9KSxNLmVtaXQoImNoYW5nZWQiKSxhd2FpdCBFLnVpLnNob3dUb2FzdCh7bWVzc2FnZToiUmVjb3JkaW5nIHJlcXVlc3RlZC4gSXQgd2lsbCBzdGFydCBpbiBhIGZldyBzZWNvbmRzLiJ9KSxlbigpKTphd2FpdCBFLnVpLnNob3dUb2FzdCh7bWVzc2FnZToiQ2Fubm90IHN0YXJ0IHRoZSByZWNvcmRpbmcifSl9LFp0PWFzeW5jKCk9Pntjb25zdCBlPUYoKTsoZSE9bnVsbD9hd2FpdCBXLnN0b3BSZWNvcmRpbmcoZSk6dm9pZCAwKT8uc3VjY2Vzcz09PSEwfHwhZGUoKT8oRmUoKSxNLmVtaXQoImNoYW5nZWQiKSxhd2FpdCBFLnVpLnNob3dUb2FzdCh7bWVzc2FnZToiUmVjb3JkaW5nIHN0b3BwZWQifSkpOmF3YWl0IEUudWkuc2hvd1RvYXN0KHttZXNzYWdlOiJDYW5ub3Qgc3RvcCB0aGUgcmVjb3JkaW5nIn0pfSxLdD1hc3luYygpPT57Y29uc3QgZT1GKCk7aWYoZT09bnVsbClyZXR1cm47Y29uc3QgdD1hd2FpdCBXLmdldFN0YXR1cyhlKTtpZih0LnN1Y2Nlc3Mpe2NvbnN0e2RhdGE6e3N0YXR1czpuLHZpZGVvSWQ6YT1lLnZpZGVvSWR9fT10O3JldHVybihuIT09ZS5zdGF0dXN8fGEhPT1lLnZpZGVvSWQpJiYoWCh7c3RhdHVzOm4sdmlkZW9JZDphfSksTS5lbWl0KCJjaGFuZ2VkIikpLGUuc3RhdHVzfX07YXN5bmMgZnVuY3Rpb24gZW4oZT02MCl7Y29uc3QgdD1uZXcgUHJvbWlzZSgobixhKT0+TS5vbmNlKCJjaGFuZ2VkIixuKSk7dHJ5e2F3YWl0IGNlKHQsZSl9Y2F0Y2h7aWYoIVEoKSlyZXR1cm47Y29uc3QgYT1sZSgpO2EhPW51bGwmJmEuc2VydmljZVR5cGUhPT0iY29ubmVjdGluZyI/KFgoe3N0YXR1czoiUmVjb3JkaW5nIixwYXJ0aWNpcGFudFV1aWQ6YS51dWlkfSksTS5lbWl0KCJjaGFuZ2VkIikpOihYKHtzdGF0dXM6IkNvbm5lY3RpbmdGYWlsZWQifSksTS5lbWl0KCJjaGFuZ2VkIiksYXdhaXQgRS51aS5zaG93VG9hc3Qoe21lc3NhZ2U6IkNhbm5vdCBzdGFydCB0aGUgcmVjb3JkaW5nIn0pKX19Y29uc3QgbGU9KCk9Pntjb25zdHtwYXJ0aWNpcGFudFV1aWQ6ZX09RigpPz97fTtyZXR1cm4gTmUoZT09bnVsbD9XLmlzUmVjb3JkaW5nUGFydGljaXBhbnQ6dD0+dC51dWlkPT09ZSl9LGRlPSgpPT5OZShXLmlzUmVjb3JkaW5nUGFydGljaXBhbnQpIT1udWxsLE09bmV3IFRlLEQ9e2luaXQ6WHQsc3RhcnRSZWNvcmRpbmc6WXQsc3RvcFJlY29yZGluZzpadCxnZXRTdGF0dXM6S3QsaGFzUmVjb3JkaW5nOkJlLGlzUmVjb3JkaW5nOnVlLGVtaXR0ZXI6TX0sdG49YXN5bmMoKT0+e2NvbnN0IGU9IkxvZyBvdXQiLHQ9YXdhaXQgRS51aS5hZGRQcm9tcHQoe3RpdGxlOiJMb2cgb3V0IixkZXNjcmlwdGlvbjoiRG8geW91IHdhbnQgdG8gbG9nIG91dCBmcm9tIFZicmljaz8iLHByb21wdDp7cHJpbWFyeUFjdGlvbjplLHNlY29uZGFyeUFjdGlvbjoiQ2FuY2VsIn19KTt0Lm9uSW5wdXQuYWRkKGFzeW5jIG49Pnthd2FpdCB0LnJlbW92ZSgpLG49PT1lJiZhd2FpdCBTLmxvZ291dCgpfSl9LFZlPXtwb3NpdGlvbjoidG9vbGJhciIsaWNvbjoiSWNvbkxpdmVTdHJlYW0iLHRvb2x0aXA6IlJlY29yZGluZ3MiLHJvbGVzOlsiY2hhaXIiXX07bGV0IG9lO2NvbnN0IEplPSJwZXhpcC12YnJpY2stYXV0aCIsSGU9InBleGlwLXZicmljay12aWRlb3MiLFNlPSJ0b29sYmFyPTAsc2Nyb2xsYmFycz0xLHN0YXR1cz0xLHJlc2l6YWJsZT0xLGxvY2F0aW9uPTEsbWVudUJhcj0wLHdpZHRoPTUwMCxoZWlnaHQ9NTAwLGxlZnQ9NjAwLHRvcD0yNTAiLG5uPWFzeW5jKCk9PntvZT1hd2FpdCBFLnVpLmFkZEJ1dHRvbihWZSksb2Uub25DbGljay5hZGQob24pfSxIPWFzeW5jKCk9Pnthd2FpdCBvZS51cGRhdGUoey4uLlZlLGlzQWN0aXZlOkQuaXNSZWNvcmRpbmcoKSxncm91cDphd2FpdCBybigpfSl9LHJuPWFzeW5jKCk9Pntjb25zdCBlPWF3YWl0IFMuZ2V0QXV0aFVybCgpO2lmKCFTLmlzQXV0aGVudGljYXRlZCgpKXJldHVyblt7aWQ6ImxvZ2luLWJ1dHRvbiIsaWNvbjoiSWNvbkxlYXZlIix0b29sdGlwOiJMb2cgaW4iLHJvbGVzOlsiY2hhaXIiXSxvcGVuc1BvcHVwOntpZDpKZSxvcGVuUGFyYW1zOltlLCIiLFNlXX19XTtjb25zdCB0PVtdO3JldHVybiB0LnB1c2goRC5pc1JlY29yZGluZygpP3tpZDoic3RvcC1idXR0b24iLGljb246Ikljb25TdG9wUm91bmQiLHRvb2x0aXA6IlN0b3AgcmVjb3JkaW5nIixyb2xlczpbImNoYWlyIl0saXNBY3RpdmU6ITB9OntpZDoic3RhcnQtYnV0dG9uIixpY29uOiJJY29uUGxheVJvdW5kIix0b29sdGlwOiJTdGFydCByZWNvcmRpbmciLHJvbGVzOlsiY2hhaXIiXX0se2lkOiJ2aWRlb3MtYnV0dG9uIixpY29uOiJJY29uT3BlbkluTmV3Iix0b29sdGlwOiJNYW5hZ2UgcmVjb3JkaW5ncyIscm9sZXM6WyJjaGFpciJdLG9wZW5zUG9wdXA6e2lkOkhlLG9wZW5QYXJhbXM6W3cudmJyaWNrLnVybCsiLyMvbWVkaWEvdXBsb2Fkcz9zb3J0RmllbGQ9d2hlblVwbG9hZGVkIiwiIixTZV19fSx7aWQ6ImxvZ291dC1idXR0b24iLGljb246Ikljb25MZWF2ZSIsdG9vbHRpcDoiTG9nIG91dCIscm9sZXM6WyJjaGFpciJdfSksdH0sb249KHtidXR0b25JZDplfSk9Pntzd2l0Y2goZSl7Y2FzZSJsb2dpbi1idXR0b24iOntfZShKZSk7YnJlYWt9Y2FzZSJsb2dvdXQtYnV0dG9uIjp7dG4oKS5jYXRjaChjb25zb2xlLmVycm9yKTticmVha31jYXNlInN0YXJ0LWJ1dHRvbiI6e0Quc3RhcnRSZWNvcmRpbmcoKS5jYXRjaChjb25zb2xlLmVycm9yKTticmVha31jYXNlInN0b3AtYnV0dG9uIjp7RC5zdG9wUmVjb3JkaW5nKCkuY2F0Y2goY29uc29sZS5lcnJvcik7YnJlYWt9Y2FzZSJ2aWRlb3MtYnV0dG9uIjp7X2UoSGUpO2JyZWFrfX19LF9lPWU9PntzZXRUaW1lb3V0KCgpPT57d2luZG93LnBsdWdpbi5wb3B1cE1hbmFnZXIuZ2V0KGUpPy5mb2N1cygpfSwwKX0sZWU9YXdhaXQgcHQoe2lkOiJwbHVnaW4tcmVjb3JkaW5nLXZicmljayIsdmVyc2lvbjowfSk7bXQoZWUpO0QuaW5pdCgpO2F3YWl0IG5uKCk7ZWUuZXZlbnRzLmF1dGhlbnRpY2F0ZWRXaXRoQ29uZmVyZW5jZS5hZGQoZT0+e3d0KGUuY29uZmVyZW5jZUFsaWFzLGUuY29uZmVyZW5jZU5hbWUpfSk7Uy5lbWl0dGVyLm9uKCJsb2dpbiIsKCk9PntIKCkuY2F0Y2goY29uc29sZS5lcnJvciksZWUudWkuc2hvd1RvYXN0KHttZXNzYWdlOiJMb2dnZWQgaW50byBWYnJpY2sifSkuY2F0Y2goY29uc29sZS5lcnJvcil9KTtTLmVtaXR0ZXIub24oInJlZnJlc2hlZF90b2tlbiIsKCk9PntIKCkuY2F0Y2goY29uc29sZS5lcnJvcil9KTtTLmVtaXR0ZXIub24oImxvZ291dCIsKCk9PntIKCkuY2F0Y2goY29uc29sZS5lcnJvciksZWUudWkuc2hvd1RvYXN0KHttZXNzYWdlOiJMb2dnZWQgb3V0IGZyb20gVmJyaWNrIn0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpfSk7RC5lbWl0dGVyLm9uKCJjaGFuZ2VkIiwoKT0+e0goKS5jYXRjaChjb25zb2xlLmVycm9yKX0pO2F3YWl0IFMuaXNTZXNzaW9uVmFsaWQoKT9hd2FpdCBTLnJlZnJlc2hBY2Nlc3NUb2tlbigpOihTLmNsZWFuU2Vzc2lvbigpLGF3YWl0IEgoKSk7PC9zY3JpcHQ+Cgo8Ym9keT4NDQo8L2JvZHk+DQoNCjwvaHRtbD4="},folder:"plugins/vbrick"};function Ml(l){const Z=atob(l).split("").map(c=>c.charCodeAt(0));return new Uint8Array(Z)}function Kl(...l){return l.filter(Z=>Z!=null&&Z!=="").reduce((Z,c)=>`${Z!==""?Z.replace(/\/*$/,"/"):""}${c.replaceAll(/[/\\]+/g,"/")}`,"")}function yZ(l){return{...l,assets:Object.fromEntries(Object.entries(l.assets).map(([Z,c])=>[Z,typeof c=="string"?Ml(c):c]))}}function sZ(l){return Kl(l.folder,l.main)}function vZ(l,Z,c=""){const{assets:n,folder:d}=Z;for(const[b,W]of Object.entries(n)){const a=typeof W=="string"?Ml(W):W,X=Kl(c,d,b);l[X]=a}return l}const Zl=yZ(oZ),El="webapp3/branding",IZ="-vbrick";async function Dl(l){if(l==null)return{};const Z=new Uint8Array(await l.arrayBuffer());return tZ(Z)}async function JZ(l){if(l==null)return;const Z=await Dl(l),c=Kl(El,Zl.folder,"config.json"),n=Object.entries(Z).find(([d,b])=>d.endsWith(c));return n!=null?JSON.parse(gl(n[1])):void 0}function NZ(l){return`${(l?.name??"branding").replace(/\.zip$/i,IZ)}.zip`}function RZ(l,Z){const{manifest:c,manifestPath:n}=FZ(l);SZ(c,Z),c.applicationConfig={...c.applicationConfig,handleOauthRedirects:!0},Z.updateVersion===!0&&(c.version=(c.version??0)+1),l[n]=el(JSON.stringify(c))}function FZ(l){const[Z,c]=Object.entries(l).find(([d])=>d.endsWith("manifest.json"))??["",new Uint8Array];if(Z===""||c.length===0)throw new Error("Invalid branding zip - no manifest.json found");const n=JSON.parse(gl(c));return{manifestPath:Z,manifest:n}}function SZ(l,Z){const{sandboxValues:c=["allow-same-origin","allow-popups","allow-forms"]}=Z,n={src:sZ(Zl),sandboxValues:c};l.plugins??=[];const d=l.plugins.find(({src:b})=>b.endsWith(n.src));d!=null?d.sandboxValues=n.sandboxValues:l.plugins.push(n)}async function LZ(l,Z){const c={},n=await Dl(l);RZ(n,c);const d={...Zl,assets:{...Zl.assets,"config.json":el(JSON.stringify(Z,null,"  "))}};vZ(n,d,El),console.log("Plugin artifacts:",Object.keys(n));const b=rZ(n);return new File([b],NZ(l),{type:"application/x-zip-compressed"})}const _=l=>document.querySelector(l);function Yl(l,Z,c){_(l).addEventListener(Z,c)}Yl("#recording_type","change",l=>{const c=l.target.value==="rtmp";_("#config_form").classList.toggle("is-rtmp",c)});Yl("#pexip_url","input",l=>{const{value:Z}=l.target;URL.canParse(Z)&&(_("#sip_domain").placeholder=new URL(Z).hostname),Al()});Yl("#branding_path","input",l=>{Al()});function Al(){const{value:l}=_("#pexip_url"),{value:Z="webapp3"}=_("#branding_path");if(URL.canParse(l)){const c=new URL(Z,l);c.pathname=c.pathname.replace(/\/*$/,"/oauth-redirect"),_("#redirect_uri").value=c.toString()}}Yl("#branding","change",l=>{const Z=_("#branding").files?.[0];Z!=null&&JZ(Z).then(c=>{c!=null&&(console.log("Updating config from branding",c),_l(c))}).catch(c=>{console.warn("error on getting config",c)})});Yl("#config_form","submit",l=>{l.preventDefault();const{config:Z,brandingZipFile:c}=gZ();LZ(c,Z).then(n=>{const d=URL.createObjectURL(n),b=_("#download_link");b.setAttribute("href",d),b.innerText=`Download ${n.name}`,b.download=n.name}).catch(n=>{console.warn("error on generating config",n)})});function jl(l){return l==null||l===""}function gZ(){const l=document.querySelectorAll("#config_form :is(input,select)"),Z=Array.from(l).map(d=>[d.name,d.type==="file"&&d.files!=null?d.files[0]:d.value]),c=Object.fromEntries(Z);c.sip_domain||=new URL(c.pexip_url).hostname;const n={recording_type:c.recording_type,vbrick:{url:c.vbrick_url,client_id:c.client_id,redirect_uri:c.redirect_uri},infinity:{sip_domain:c.sip_domain},recorder:{url:c.recorder_url,route:c.recorder_route,display_name:c.display_name,legacy_dialout_api:/yes|true|checked/i.test(c.legacy_dialout_api)}};return console.log("Plugin Config: ",n),{config:n,brandingZipFile:c.branding}}function _l(l={}){KZ(l);const Z=[["pexip_url","input",l.infinity_url],["recording_type","change",l.recording_type],["branding_path","input",l.branding_path],["vbrick_url","change",l.vbrick?.url],["client_id","change",l.vbrick?.client_id],["redirect_uri","change",l.vbrick?.redirect_uri],["recorder_url","change",l.recorder?.url],["recorder_route","change",l.recorder?.route],["sip_domain","change",l.infinity?.sip_domain]];CZ(Z)}Zl.defaults!=null&&typeof Zl.defaults=="object"&&_l(Zl.defaults);function KZ(l={}){const{redirect_uri:Z=""}=l.vbrick??{};if(URL.canParse(Z)){const c=new URL(Z);return l.infinity_url||=c.origin,l.branding_path||=c.pathname.replace("/oauth-redirect","").slice(1),l}}function CZ(l){for(const[Z,c,n]of l){if(jl(n))continue;const d=_(`#${Z}`);(jl(d.value)||d instanceof HTMLSelectElement)&&(d.value=n);const b=new CustomEvent(c);d.dispatchEvent(b)}}</script>
    </head>

    <body>
        <form id="config_form">
            <fieldset>
                <legend>Branding</legend>
                <label for="branding">
                    <strong>Branding ZIP File</strong>
                    <input type="file" id="branding" name="branding" accept=".zip" />
                </label>
            </fieldset>
            <fieldset>
                <legend>Infinity</legend>
                <label for="pexip_url">
                    <strong>Infinity URL</strong>
                    <input
                        type="url"
                        id="pexip_url"
                        name="pexip_url"
                        required
                    />
                </label>
                <label for="branding_path">
                    <strong>Branding Path</strong>
                    <input
                        type="text"
                        id="branding_path"
                        name="branding_path"
                        required
                    />
                </label>
                <!-- <label for="update_version">
                    <strong>Update manifest version</strong>
                    <input
                        type="checkbox"
                        id="update_version"
                        name="update_version"
                    />
                </label> -->
            </fieldset>
            <fieldset>
                <legend>Vbrick</legend>
                <label for="vbrick_url">
                    <strong>Vbrick Rev URL</strong>
                    <input
                        type="url"
                        id="vbrick_url"
                        name="vbrick_url"
                        required
                    />
                </label>
                <label for="client_id">
                    <strong>OAuth Client ID</strong>
                    <input
                        type="text"
                        id="client_id"
                        name="client_id"
                        required
                    />
                </label>
                <label for="redirect_uri">
                    <strong>OAuth redirect uri</strong>
                    <input
                        type="text"
                        id="redirect_uri"
                        name="redirect_uri"
                        placeholder="calculated from Infinity URL"
                        readonly
                    />
                </label>
            </fieldset>
            <fieldset>
                <label for="recording_type">
                    <strong>Recording Type</strong>
                    <select id="recording_type" name="recording_type">
                        <option value="sip" selected>SIP</option>
                        <option value="rtmp">RTMP</option>
                    </select>
                </label>
            </fieldset>
            <fieldset id="sip_settings">
                <label for="sip_domain">
                    <strong>Pexip sip domain</strong>
                    <input
                        type="text"
                        id="sip_domain"
                        name="sip_domain"
                        placeholder="leave blank if same as Infinity URL"
                    />
                </label>
            </fieldset>
            <fieldset id="rtmp_settings">
                <legend>RTMP Recording</legend>
                <label for="recorder_url">
                    <strong>On-prem Recorder URL</strong>
                    <input
                        type="url"
                        id="recorder_url"
                        name="recorder_url"
                        placeholder="https://rtmp.recorder.url"
                    />
                </label>
                <label for="recorder_route">
                    <strong>Route</strong>
                    <input
                        type="text"
                        id="recorder_route"
                        name="recorder_route"
                        value="vmr"
                    />
                </label>
                <label for="display_name">
                    <strong>Display Name</strong>
                    <input
                        type="text"
                        id="display_name"
                        name="display_name"
                        value="Vbrick Recorder"
                    />
                </label>
                <label for="legacy_dialout_api">
                    <strong>Use Legacy DialOut API?</strong>
                    <select
                        id="legacy_dialout_api"
                        name="legacy_dialout_api"
                    >
                        <option value="" selected>No</option>
                        <option value="true">Yes</option>
                    </select>
                </label>
            </fieldset>
            <fieldset class="grid">
                <button type="reset">Reset Form</button>
                <button type="submit">Create Plugin ZIP</button>
                <a id="download_link" target="_blank" download="plugin.zip">Download plugin.zip</a>
            </fieldset>
        </form>
        
    </body>
</html>
